"use strict";(self.webpackChunkcrm=self.webpackChunkcrm||[]).push([[4803],{4803:(e,l,n)=>{n.d(l,{A:()=>W});var o=n(4093),i=n(5371),t=n(9081),a=n(2107),r=n(511),s=n(3313),d=n(5395),c=n(3201),u=n(2595),p=n(7813),x=n(9918),v=n(5043),h=n(1094),m=n(8584),g=n(216),j=n(6914),f=n(100),S=n(9488),b=n(5369),C=n(5475),D=n(6),y=n(9250),E=n(8911),z=n(579);function W(e){const{columnsData:l,tableData:n,fetchData:W,isLoding:w}=e,N=(0,o.dU)("secondaryGray.900","white"),P=(0,o.dU)("gray.200","whiteAlpha.100"),B=(0,v.useMemo)((()=>l),[l]),[A,k]=(0,v.useState)([]),[T,H]=(0,v.useState)(!1),[O,F]=(0,v.useState)(),[I,V]=(0,v.useState)(),_=(0,v.useMemo)((()=>n),[n]),$=JSON.parse(localStorage.getItem("user")),R=(0,h.useTable)({columns:B,data:_,initialState:{pageIndex:0}},h.useGlobalFilter,h.useSortBy,h.usePagination),{getTableProps:G,getTableBodyProps:M,headerGroups:L,prepareRow:J,page:X,canPreviousPage:U,canNextPage:Y,pageOptions:q,pageCount:K,gotoPage:Q,nextPage:Z,previousPage:ee,setPageSize:le,state:{pageIndex:ne,pageSize:oe}}=R;q.length<I&&V(q.length);const[ie,te]=(0,v.useState)(!1),[ae,re]=(0,v.useState)(!1);return(0,v.useEffect)((()=>{W&&W()}),[T,e.isOpen]),(0,z.jsxs)(g.A,{direction:"column",w:"100%",px:"0px",overflowX:{sm:"scroll",lg:"hidden"},children:[(0,z.jsx)(D.A,{fetchData:W,isOpen:ie,onClose:te,id:O}),(0,z.jsx)(y.A,{fetchData:W,isOpen:ae,onClose:re,id:O}),(0,z.jsxs)(i.s,{px:"25px",justify:"space-between",mb:"20px",align:"center",children:[(0,z.jsxs)(t.E,{color:N,fontSize:"22px",fontWeight:"700",lineHeight:"100%",children:["Contacts (",(0,z.jsx)(j.A,{targetNumber:null===_||void 0===_?void 0:_.length}),")"]}),A.length>0&&(0,z.jsx)(m.d,{onClick:()=>H(!0),color:"red"})]}),(0,z.jsx)(E.A,{isOpen:T,onClose:H,setSelectedValues:k,url:"api/contact/deleteMany",data:A,method:"many"}),(0,z.jsx)(a.a,{overflowY:"auto",className:"table-fix-container",children:(0,z.jsxs)(r.X,{...G(),variant:"simple",color:"gray.500",mb:"24px",children:[(0,z.jsx)(s.d,{children:null===L||void 0===L?void 0:L.map(((e,l)=>{var n;return(0,v.createElement)(d.Tr,{...e.getHeaderGroupProps(),key:l},null===(n=e.headers)||void 0===n?void 0:n.map(((e,l)=>(0,v.createElement)(c.Th,{...e.getHeaderProps(!1!==e.isSortable&&e.getSortByToggleProps()),pe:"10px",key:l,borderColor:P},(0,z.jsxs)(i.s,{justify:"space-between",align:"center",fontSize:{sm:"10px",lg:"12px"},color:"gray.400",children:[e.render("Header"),!1!==e.isSortable&&(0,z.jsx)("span",{children:e.isSorted?e.isSortedDesc?(0,z.jsx)(b.GOR,{}):(0,z.jsx)(b.XhJ,{}):(0,z.jsx)(b.MjW,{})})]})))))}))}),(0,z.jsx)(u.N,{...M(),children:w?(0,z.jsx)(d.Tr,{children:(0,z.jsx)(p.Td,{colSpan:null===B||void 0===B?void 0:B.length,children:(0,z.jsx)(i.s,{justifyContent:"center",alignItems:"center",width:"100%",color:N,fontSize:"sm",fontWeight:"700",children:(0,z.jsx)(S.A,{})})})}):0===(null===_||void 0===_?void 0:_.length)?(0,z.jsx)(d.Tr,{children:(0,z.jsx)(p.Td,{colSpan:B.length,children:(0,z.jsx)(t.E,{textAlign:"center",width:"100%",color:N,fontSize:"sm",fontWeight:"700",children:"-- No Data Found --"})})}):(null===_||void 0===_?void 0:_.length)>0&&(null===X||void 0===X?void 0:X.map(((e,l)=>{var n;return J(e),(0,v.createElement)(d.Tr,{...null===e||void 0===e?void 0:e.getRowProps(),key:l},null===e||void 0===e||null===(n=e.cells)||void 0===n?void 0:n.map(((e,l)=>{let n="";var o;if("#"===(null===e||void 0===e?void 0:e.column.Header))n=(0,z.jsxs)(i.s,{align:"center",children:[(0,z.jsx)(x.S,{colorScheme:"brandScheme",value:A,isChecked:A.includes(null===e||void 0===e?void 0:e.value),onChange:l=>((e,l)=>{e.target.checked?k((e=>[...e,l])):k((e=>e.filter((e=>e!==l))))})(l,null===e||void 0===e?void 0:e.value),me:"10px"}),(0,z.jsx)(t.E,{color:N,fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.index)+1})]});else if("title"===(null===e||void 0===e?void 0:e.column.Header))n=(0,z.jsx)(t.E,{me:"10px",color:N,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value});else if("first Name"===(null===e||void 0===e?void 0:e.column.Header)){var a,r;n=(0,z.jsx)(C.N_,{to:"admin"!==(null===$||void 0===$?void 0:$.role)?`/contactView/${null===e||void 0===e||null===(a=e.row)||void 0===a?void 0:a.original._id}`:`/admin/contactView/${null===e||void 0===e||null===(r=e.row)||void 0===r?void 0:r.original._id}`,children:(0,z.jsx)(t.E,{me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},color:"green.400",fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value})})}else"last Name"===(null===e||void 0===e?void 0:e.column.Header)?n=(0,z.jsx)(t.E,{me:"10px",color:N,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}):"phone Number"===(null===e||void 0===e?void 0:e.column.Header)?n=(0,z.jsx)(t.E,{fontSize:"sm",fontWeight:"700",onClick:()=>{var l;re(!0),F(null===e||void 0===e||null===(l=e.row)||void 0===l?void 0:l.values._id)},color:"green.400",sx:{cursor:"pointer","&:hover":{color:"blue.500",textDecoration:"underline"}},children:null===e||void 0===e?void 0:e.value}):"Email Address"===(null===e||void 0===e?void 0:e.column.Header)?n=(0,z.jsx)(t.E,{fontSize:"sm",fontWeight:"700",onClick:()=>{var l;te(!0),F(null===e||void 0===e||null===(l=e.row)||void 0===l?void 0:l.values._id)},color:"green.400",sx:{cursor:"pointer","&:hover":{color:"blue.500",textDecoration:"underline"}},children:null===e||void 0===e?void 0:e.value}):("physical Address"===(null===e||void 0===e?void 0:e.column.Header)||"mailing Address"===(null===e||void 0===e?void 0:e.column.Header)||"Contact Method"===(null===e||void 0===e?void 0:e.column.Header))&&(n=(0,z.jsx)(t.E,{color:N,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}));return(0,v.createElement)(p.Td,{...null===e||void 0===e?void 0:e.getCellProps(),key:l,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"},n)})))})))})]})}),(null===_||void 0===_?void 0:_.length)>5&&(0,z.jsx)(f.A,{gotoPage:Q,gopageValue:I,setGopageValue:V,pageCount:K,canPreviousPage:U,previousPage:ee,canNextPage:Y,pageOptions:q,setPageSize:le,nextPage:Z,pageSize:oe,pageIndex:ne})]})}},6:(e,l,n)=>{n.d(l,{A:()=>y});var o=n(8460),i=n(1054),t=n(5421),a=n(5071),r=n(5929),s=n(7516),d=n(3533),c=n(5527),u=n(6668),p=n(9081),x=n(5699),v=n(9077),h=n(6529),m=n(9301),g=n(9488),j=n(3516),f=n(5043),S=n(2127),b=n(6092),C=n(9621),D=n(579);const y=e=>{const{onClose:l,isOpen:n,fetchData:y}=e,E=JSON.parse(localStorage.getItem("user")),[z,W]=(0,f.useState)(!1),[w,N]=(0,f.useState)(!1),[P,B]=(0,f.useState)(!1),A={sender:null===E||void 0===E?void 0:E._id,recipient:"",subject:"",message:"",createBy:"",createByLead:"",startDate:"",endDate:""},k=(0,j.Wx)({initialValues:A,validationSchema:b.y4,onSubmit:(e,l)=>{let{resetForm:n}=l;$(),n()}}),{errors:T,touched:H,values:O,handleBlur:F,handleChange:I,handleSubmit:V,setFieldValue:_}=k,$=async()=>{try{W(!0),200===(await(0,C.d_)("api/email/add",O)).status&&(e.onClose(),y())}catch(l){console.log(l)}finally{W(!1)}};return(0,f.useEffect)((()=>{(async()=>{if(e.id&&"true"!==e.lead){let t=await(0,C.x4)("api/contact/view/",e.id);var l,n,o,i;200===(null===t||void 0===t?void 0:t.status)&&(_("recipient",null===t||void 0===t||null===(l=t.data)||void 0===l||null===(n=l.contact)||void 0===n?void 0:n.email),_("createBy",e.id),O.recipient=null===t||void 0===t||null===(o=t.data)||void 0===o||null===(i=o.contact)||void 0===i?void 0:i.email)}else if(e.id&&"true"===e.lead){let l=await(0,C.x4)("api/lead/view/",e.id);var t,a,r,s;200===(null===l||void 0===l?void 0:l.status)&&(_("recipient",null===l||void 0===l||null===(t=l.data)||void 0===t||null===(a=t.lead)||void 0===a?void 0:a.leadEmail),_("createByLead",e.id),O.recipient=null===l||void 0===l||null===(r=l.data)||void 0===r||null===(s=r.lead)||void 0===s?void 0:s.leadEmail)}})()}),[e.id]),(0,D.jsxs)(o.aF,{onClose:l,isOpen:n,isCentered:!0,children:[(0,D.jsx)(i.m,{}),(0,D.jsxs)(t.$,{children:[(0,D.jsx)(a.r,{children:"Send Email "}),(0,D.jsx)(r.s,{}),(0,D.jsx)(s.c,{children:(0,D.jsxs)(d.x,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,D.jsxs)(c.E,{colSpan:{base:12},children:[(0,D.jsxs)(u.l,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Recipient",(0,D.jsx)(p.E,{color:"red",children:"*"})]}),(0,D.jsx)(x.p,{fontSize:"sm",onChange:I,onBlur:F,value:O.recipient,name:"recipient",placeholder:"Recipient",fontWeight:"500",borderColor:T.recipient&&H.recipient?"red.300":null}),(0,D.jsxs)(p.E,{mb:"10px",color:"red",children:[" ",T.recipient&&H.recipient&&T.recipient]})]}),(0,D.jsxs)(c.E,{colSpan:{base:12},children:[(0,D.jsx)(u.l,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Subject"}),(0,D.jsx)(x.p,{fontSize:"sm",placeholder:"Enter subject",onChange:I,onBlur:F,value:O.subject,name:"subject",fontWeight:"500",borderColor:T.subject&&H.subject?"red.300":null}),(0,D.jsxs)(p.E,{mb:"10px",color:"red",children:[" ",T.subject&&H.subject&&T.subject]})]}),(0,D.jsxs)(c.E,{colSpan:{base:12,md:6},children:[(0,D.jsx)(u.l,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Start Date"}),(0,D.jsx)(x.p,{type:"datetime-local",fontSize:"sm",onChange:I,onBlur:F,value:O.startDate,name:"startDate",fontWeight:"500",borderColor:null!==T&&void 0!==T&&T.startDate&&null!==H&&void 0!==H&&H.startDate?"red.300":null}),(0,D.jsxs)(p.E,{mb:"10px",color:"red",children:[" ",T.startDate&&H.startDate&&T.startDate]})]}),(0,D.jsxs)(c.E,{colSpan:{base:12,md:6},children:[(0,D.jsx)(u.l,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"End Date"}),(0,D.jsx)(x.p,{type:"datetime-local",fontSize:"sm",onChange:I,onBlur:F,value:O.endDate,name:"endDate",fontWeight:"500",borderColor:null!==T&&void 0!==T&&T.endDate&&null!==H&&void 0!==H&&H.endDate?"red.300":null}),(0,D.jsxs)(p.E,{mb:"10px",color:"red",children:[" ",T.endDate&&H.endDate&&T.endDate]})]}),(0,D.jsxs)(c.E,{colSpan:{base:12},children:[(0,D.jsx)(u.l,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Message"}),(0,D.jsx)(v.T,{fontSize:"sm",placeholder:"Here Type message",resize:"none",onChange:I,onBlur:F,value:O.message,name:"message",fontWeight:"500",borderColor:T.message&&H.message?"red.300":null}),(0,D.jsxs)(p.E,{mb:"10px",color:"red",children:[" ",T.message&&H.message&&T.message]})]})]})}),(0,D.jsxs)(h.j,{children:[(0,D.jsx)(m.$,{variant:"brand",onClick:V,rightIcon:(0,D.jsx)(S.qYP,{}),disabled:!!z,children:z?(0,D.jsx)(g.A,{}):"Send"}),(0,D.jsx)(m.$,{onClick:()=>{k.resetForm(),l()},children:"Close"})]})]})]})}},9250:(e,l,n)=>{n.d(l,{A:()=>y});var o=n(8460),i=n(1054),t=n(5421),a=n(5071),r=n(5929),s=n(7516),d=n(3533),c=n(5527),u=n(6668),p=n(9081),x=n(5699),v=n(9077),h=n(6529),m=n(9301),g=n(9488),j=n(3516),f=n(5043),S=n(2127),b=n(6092),C=n(9621),D=n(579);const y=e=>{const{onClose:l,isOpen:n,fetchData:y}=e,[E,z]=(0,f.useState)(!1),W=JSON.parse(localStorage.getItem("user")),w={sender:null===W||void 0===W?void 0:W._id,recipient:"",callDuration:"",callNotes:"",createBy:"",createByLead:"",startDate:"",endDate:""},N=(0,j.Wx)({initialValues:w,validationSchema:b.Ar,onSubmit:(e,l)=>{let{resetForm:n}=l;F(),n()}}),{errors:P,touched:B,values:A,handleBlur:k,handleChange:T,handleSubmit:H,setFieldValue:O}=N,F=async()=>{try{z(!0),200===(await(0,C.d_)("api/phoneCall/add",A)).status&&(e.onClose(),y())}catch(l){console.log(l)}finally{z(!1)}};return(0,f.useEffect)((()=>{(async()=>{if(e.id&&"true"!==e.lead){let t=await(0,C.x4)("api/contact/view/",e.id);var l,n,o,i;200===(null===t||void 0===t?void 0:t.status)&&(O("recipient",null===t||void 0===t||null===(l=t.data)||void 0===l||null===(n=l.contact)||void 0===n?void 0:n.phoneNumber),O("createBy",null===e||void 0===e?void 0:e.id),A.recipient=null===t||void 0===t||null===(o=t.data)||void 0===o||null===(i=o.contact)||void 0===i?void 0:i.phoneNumber)}else if(e.id&&"true"===e.lead){let l=await(0,C.x4)("api/lead/view/",e.id);var t,a,r,s;200===(null===l||void 0===l?void 0:l.status)&&(O("recipient",null===l||void 0===l||null===(t=l.data)||void 0===t||null===(a=t.lead)||void 0===a?void 0:a.leadPhoneNumber),O("createByLead",e.id),A.recipient=null===l||void 0===l||null===(r=l.data)||void 0===r||null===(s=r.lead)||void 0===s?void 0:s.leadPhoneNumber)}})()}),[e.id]),(0,D.jsxs)(o.aF,{onClose:l,isOpen:n,isCentered:!0,children:[(0,D.jsx)(i.m,{}),(0,D.jsxs)(t.$,{children:[(0,D.jsx)(a.r,{children:"Add Call "}),(0,D.jsx)(r.s,{}),(0,D.jsx)(s.c,{children:(0,D.jsxs)(d.x,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,D.jsxs)(c.E,{colSpan:{base:12},children:[(0,D.jsxs)(u.l,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Recipient",(0,D.jsx)(p.E,{color:"red",children:"*"})]}),(0,D.jsx)(x.p,{fontSize:"sm",type:"number",onChange:T,onBlur:k,value:A.recipient,name:"recipient",placeholder:"Recipient",fontWeight:"500",borderColor:P.recipient&&B.recipient?"red.300":null}),(0,D.jsxs)(p.E,{mb:"10px",color:"red",children:[" ",P.recipient&&B.recipient&&P.recipient]})]}),(0,D.jsxs)(c.E,{colSpan:{base:12,md:6},children:[(0,D.jsx)(u.l,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Start Date"}),(0,D.jsx)(x.p,{type:"datetime-local",fontSize:"sm",onChange:T,onBlur:k,value:A.startDate,name:"startDate",fontWeight:"500",borderColor:null!==P&&void 0!==P&&P.startDate&&null!==B&&void 0!==B&&B.startDate?"red.300":null}),(0,D.jsxs)(p.E,{mb:"10px",color:"red",children:[" ",P.startDate&&B.startDate&&P.startDate]})]}),(0,D.jsxs)(c.E,{colSpan:{base:12,md:6},children:[(0,D.jsx)(u.l,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"End Date"}),(0,D.jsx)(x.p,{type:"datetime-local",fontSize:"sm",onChange:T,onBlur:k,value:A.endDate,name:"endDate",fontWeight:"500",borderColor:null!==P&&void 0!==P&&P.endDate&&null!==B&&void 0!==B&&B.endDate?"red.300":null}),(0,D.jsxs)(p.E,{mb:"10px",color:"red",children:[" ",P.endDate&&B.endDate&&P.endDate]})]}),(0,D.jsxs)(c.E,{colSpan:{base:12},children:[(0,D.jsxs)(u.l,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Call Duration",(0,D.jsx)(p.E,{color:"red",children:"*"})]}),(0,D.jsx)(x.p,{fontSize:"sm",onChange:T,onBlur:k,value:A.callDuration,name:"callDuration",placeholder:"call Duration",fontWeight:"500",borderColor:P.callDuration&&B.callDuration?"red.300":null}),(0,D.jsxs)(p.E,{mb:"10px",color:"red",children:[" ",P.callDuration&&B.callDuration&&P.callDuration]})]}),(0,D.jsxs)(c.E,{colSpan:{base:12},children:[(0,D.jsx)(u.l,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Call Notes"}),(0,D.jsx)(v.T,{resize:"none",fontSize:"sm",placeholder:"Enter Call Notes",onChange:T,onBlur:k,value:A.callNotes,name:"callNotes",fontWeight:"500",borderColor:P.callNotes&&B.callNotes?"red.300":null}),(0,D.jsxs)(p.E,{mb:"10px",color:"red",children:[" ",P.callNotes&&B.callNotes&&P.callNotes]})]})]})}),(0,D.jsxs)(h.j,{children:[(0,D.jsx)(m.$,{variant:"brand",leftIcon:(0,D.jsx)(S.s91,{}),disabled:!!E,onClick:H,children:E?(0,D.jsx)(g.A,{}):"Call"}),(0,D.jsx)(m.$,{onClick:()=>{N.resetForm(),l()},children:"Close"})]})]})]})}}}]);
//# sourceMappingURL=4803.e974528c.chunk.js.map