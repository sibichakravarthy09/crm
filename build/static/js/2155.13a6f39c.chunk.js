"use strict";(self.webpackChunkcrm=self.webpackChunkcrm||[]).push([[2155],{962:(e,l,n)=>{n.d(l,{A:()=>R});var o=n(6205),t=n(2825),i=n(8797),a=n(8584),s=n(7781),d=n(9081),r=n(5371),c=n(9883),u=n(6236),x=n(1872),h=n(3560),p=n(3407),m=n(5043),v=n(243),g=n(1009),j=n(4960),f=n(7149),b=n(3216),S=n(8460),C=n(1054),y=n(5421),k=n(5071),w=n(5929),D=n(7516),E=n(6529),z=n(9301),N=n(9621),L=n(579);const P=e=>(0,L.jsx)("div",{children:(0,L.jsxs)(S.aF,{onClose:e.onClose,isOpen:e.isOpen,isCentered:!0,children:[(0,L.jsx)(C.m,{}),(0,L.jsxs)(y.$,{children:[(0,L.jsxs)(k.r,{children:["Delete Document","one"===e.method?"":"s"]}),(0,L.jsx)(w.s,{}),(0,L.jsxs)(D.c,{children:["Are You Sure To Delete selated Document","one"===e.method?"":"s"," ?"]}),(0,L.jsxs)(E.j,{children:[(0,L.jsx)(z.$,{colorScheme:"red",mr:2,onClick:async()=>{if("one"===e.method)e.deleteFile(e.id),e.onClose(!1);else if("many"===e.method)try{200===(await(0,N.Vn)(e.url,e.data)).status&&(e.setSelectedValues([]),e.onClose(!1))}catch(l){console.log(l)}},children:"Yes"}),(0,L.jsx)(z.$,{variant:"outline",onClick:()=>{e.onClose(!1)},children:"No"})]})]})]})});var W=n(6870),T=n(3533),B=n(5527),_=n(6668),I=n(6686),A=n(9904),$=n(4812),H=n(5699),O=n(3516),F=n(2145);const V=e=>{const{setLinkDocument:l}=e,[n,t]=(0,m.useState)(!1),{isOpen:i,onOpen:a,onClose:r}=(0,W.j)(),[c,u]=(0,m.useState)([]),x=JSON.parse(localStorage.getItem("user")),h=(0,O.Wx)({initialValues:{linkWith:"",linkContact:"",linkLead:""},onSubmit:(e,l)=>{let{resetForm:n}=l;M(),n()}}),{errors:p,touched:v,values:g,handleBlur:j,handleChange:f,handleSubmit:b,setFieldValue:P,resetForm:V}=h,M=async()=>{try{t(!0);let o=g.linkContact?{linkContact:g.linkContact}:{linkLead:g.linkLead},i=await(0,N.d_)(`api/document/link-document/${e.id}`,o);var n;if(i&&200===i.status)l((e=>!e)),e.onClose();else F.oR.error(null===(n=i.response.data)||void 0===n?void 0:n.message)}catch(o){console.log(o)}finally{t(!1)}};return(0,m.useEffect)((()=>{(async()=>{if("contact"===g.linkWith){let e=await(0,N.x4)("admin"===x.role?"api/contact/":`api/contact/?createBy=${x._id}`);g.createBy=null===e||void 0===e?void 0:e._id,u((l=>{var n;return[...(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.map((e=>({label:e.firstName+" "+e.lastName,value:e._id}))))||[]]}))}else if("lead"===g.linkWith){let e=await(0,N.x4)("admin"===x.role?"api/lead/":`api/lead/?createBy=${x._id}`);g.createBy=null===e||void 0===e?void 0:e._id,u((l=>{var n;return[...(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.map((e=>({label:e.leadName,value:e._id}))))||[]]}))}})()}),[g]),(0,L.jsxs)(S.aF,{onClose:e.onClose,isOpen:e.isOpen,children:[(0,L.jsx)(C.m,{}),(0,L.jsxs)(y.$,{children:[(0,L.jsx)(k.r,{children:"Link With Document"}),(0,L.jsx)(w.s,{}),(0,L.jsx)(D.c,{children:(0,L.jsxs)(T.x,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,L.jsxs)(B.E,{colSpan:{base:12},children:[(0,L.jsx)(_.l,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Link With"}),(0,L.jsx)(I.z,{onChange:e=>{V(),P("linkWith",e)},value:g.linkWith,children:(0,L.jsxs)(A.B,{direction:"row",children:[(0,L.jsx)($.s,{value:"contact",children:"Contact"}),(0,L.jsx)($.s,{value:"lead",children:"Lead"})]})}),(0,L.jsxs)(d.E,{mb:"10px",color:"red",children:[" ",p.linkWith&&v.linkWith&&p.linkWith]})]}),"contact"===g.linkWith?(0,L.jsxs)(B.E,{colSpan:{base:12},children:[(0,L.jsx)(_.l,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Link Contact"}),(0,L.jsx)(H.p,{onFocus:a,fontSize:"sm",onChange:f,onBlur:()=>setTimeout(r,200),value:null===g||void 0===g?void 0:g.linkLabel,name:"linkLabel",placeholder:"Link Contact",fontWeight:"500",borderColor:null!==p&&void 0!==p&&p.linkLabel&&null!==v&&void 0!==v&&v.linkLabel?"red.300":null}),i&&(null===g||void 0===g?void 0:g.linkLabel)&&(0,L.jsx)(s.B8,{position:"relative",border:"1px solid",bg:"gray.100",width:"100%",borderRadius:"0px 0px 20px 20px",lineHeight:1,children:null===c||void 0===c?void 0:c.filter((e=>{var l,n;return null===e||void 0===e||null===(l=e.label)||void 0===l||null===(n=l.toLowerCase())||void 0===n?void 0:n.includes(null===g||void 0===g?void 0:g.linkLabel.toLowerCase())})).map(((e,l)=>(0,L.jsx)(s.ck,{p:3,borderBottom:"2px solid #efefef",sx:{"&:last-child":{borderBottom:"none"}},cursor:"pointer",onClick:()=>{P("linkContact",null===e||void 0===e?void 0:e.value),P("linkLabel",null===e||void 0===e?void 0:e.label)},children:null===e||void 0===e?void 0:e.label},null===e||void 0===e?void 0:e.value)))}),(0,L.jsxs)(d.E,{mb:"10px",color:"red",children:[" ",p.linkContact&&v.linkContact&&p.linkContact]})]}):"lead"===g.linkWith&&(0,L.jsxs)(B.E,{colSpan:{base:12},children:[(0,L.jsx)(_.l,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Link Lead"}),(0,L.jsx)(H.p,{onFocus:a,fontSize:"sm",onChange:f,onBlur:()=>setTimeout(r,200),value:null===g||void 0===g?void 0:g.linkLabel,name:"linkLabel",placeholder:"Link Lead",fontWeight:"500",borderColor:null!==p&&void 0!==p&&p.linkLabel&&null!==v&&void 0!==v&&v.linkLabel?"red.300":null}),i&&(null===g||void 0===g?void 0:g.linkLabel)&&(0,L.jsx)(s.B8,{position:"relative",border:"1px solid",bg:"gray.100",width:"100%",borderRadius:"0px 0px 20px 20px",lineHeight:1,children:null===c||void 0===c?void 0:c.filter((e=>{var l,n;return null===e||void 0===e||null===(l=e.label)||void 0===l||null===(n=l.toLowerCase())||void 0===n?void 0:n.includes(null===g||void 0===g?void 0:g.linkLabel.toLowerCase())})).map(((e,l)=>(0,L.jsx)(s.ck,{p:3,borderBottom:"2px solid #efefef",sx:{"&:last-child":{borderBottom:"none"}},cursor:"pointer",onClick:()=>{P("linkLead",null===e||void 0===e?void 0:e.value),P("linkLabel",null===e||void 0===e?void 0:e.label)},children:null===e||void 0===e?void 0:e.label},null===e||void 0===e?void 0:e.value)))}),(0,L.jsxs)(d.E,{mb:"10px",color:"red",children:[" ",p.linkLead&&v.linkLead&&p.linkLead]})]})]})}),(0,L.jsxs)(E.j,{children:[(0,L.jsx)(z.$,{colorScheme:"brand",rightIcon:(0,L.jsx)(o.q,{}),mr:2,onClick:M,children:"Link"}),(0,L.jsx)(z.$,{variant:"outline",colorScheme:"red",onClick:()=>{e.onClose(!1)},children:"Cancel"})]})]})]})};var M=n(7368);const R=e=>{let{data:l,deleteFile:n,item:S,download:C,name:y,isFile:k,children:w,setLinkDocument:D,from:E}=e;const[z,N]=(0,m.useState)(!1),[W,T]=(0,m.useState)(!1),[B,_]=(0,m.useState)(!1),[I,A]=(0,m.useState)(!1),$=(0,b.Zp)(),H=!k&&!!w,O=JSON.parse(localStorage.getItem("user"));return(0,L.jsxs)(s.B8,{width:"100%",children:[(0,L.jsx)(s.ck,{alignItems:"center",display:"flex",children:(0,L.jsxs)(d.E,{alignItems:"center",justifyContent:"space-between",display:"flex",width:"100%",onClick:H?()=>{N(!z)}:void 0,_hover:{cursor:"pointer",textDecoration:"none"},children:[(0,L.jsxs)(r.s,{width:"70%",alignItems:"center",children:[(0,L.jsx)(s.kp,{as:k?g.QuH:v.NVk}),H&&(z?(0,L.jsx)(g.fK4,{}):(0,L.jsx)(g.fOo,{})),y]}),null!==S&&void 0!==S&&S.createByName?(0,L.jsxs)(d.E,{children:["(",null===S||void 0===S?void 0:S.createByName,") "]}):null,!H&&(0,L.jsx)(r.s,{justifyContent:"right",width:"100%",children:(0,L.jsxs)(c.W,{isLazy:!0,children:[(0,L.jsx)(u.I,{children:(0,L.jsx)(M.txp,{})}),(0,L.jsxs)(x.c,{position:"absolute",right:-5,pl:"0.5em",minW:"fit-content",children:[!E&&null!==l&&void 0!==l&&l.linkContact?(0,L.jsx)(h.D,{pr:2,w:"180px",onClick:()=>$("admin"!==(null===O||void 0===O?void 0:O.role)?`/contactView/${null===l||void 0===l?void 0:l.linkContact}`:`/admin/contactView/${null===l||void 0===l?void 0:l.linkContact}`),icon:(0,L.jsx)(j.oau,{fontSize:15}),children:"Linked Contact"}):!E&&(null===l||void 0===l?void 0:l.linkLead)&&(0,L.jsx)(h.D,{pr:2,w:"180px",onClick:()=>$("admin"!==(null===O||void 0===O?void 0:O.role)?`/leadView/${null===l||void 0===l?void 0:l.linkLead}`:`/admin/leadView/${null===l||void 0===l?void 0:l.linkLead}`),icon:(0,L.jsx)(f.ju$,{fontSize:15}),children:"Linked Lead"}),!E&&(0,L.jsx)(h.D,{pr:10,color:"blue",onClick:()=>(e=>{_(!0),A(e)})(null===l||void 0===l?void 0:l._id),icon:(0,L.jsx)(o.q,{fontSize:15}),children:"Link"}),function(e){const l=e.substring(e.lastIndexOf(".")).toLowerCase();return[".jpg",".jpeg",".png",".gif",".bmp"].includes(l)}(null===l||void 0===l?void 0:l.img)&&(0,L.jsx)(h.D,{pr:10,color:"green",onClick:()=>window.open(null===l||void 0===l?void 0:l.img),icon:(0,L.jsx)(t.t,{fontSize:15}),children:"View"}),(0,L.jsx)(h.D,{pr:10,onClick:()=>(e=>{C(e)})(null===l||void 0===l?void 0:l._id),icon:(0,L.jsx)(i.s,{fontSize:15}),children:"Download"}),!E&&(0,L.jsx)(h.D,{pr:10,color:"red",onClick:()=>(e=>{T(!0),A(e)})(null===l||void 0===l?void 0:l._id),icon:(0,L.jsx)(a.d,{fontSize:15}),children:"Delete"})]})]})}),(0,L.jsx)(P,{isOpen:W,onClose:T,method:"one",deleteFile:n,id:I}),(0,L.jsx)(V,{isOpen:B,setLinkDocument:D,onClose:_,id:I})]})}),H&&(0,L.jsx)(p.S,{in:z,animateOpacity:!0,children:(0,L.jsx)(s.B8,{styleType:"disc",ml:4,children:w})})]})}},3278:(e,l,n)=>{n.d(l,{A:()=>D});var o=n(4093),t=n(5371),i=n(9081),a=n(9301),s=n(2107),d=n(511),r=n(3313),c=n(5395),u=n(3201),x=n(2595),h=n(7813),p=n(6178),m=n.n(p),v=n(5043),g=n(1094),j=n(216),f=n(6914),b=n(100),S=n(2127),C=n(3216),y=n(5475),k=n(6),w=n(579);function D(e){const{columnsData:l,tableData:n,title:p,fetchData:D}=e,E=(0,v.useMemo)((()=>l),[l]),z=(0,v.useMemo)((()=>n),[n]),[N,L]=(0,v.useState)(!1),P=JSON.parse(localStorage.getItem("user")),[W,T]=(0,v.useState)(),B=(0,g.useTable)({columns:E,data:z,initialState:{pageIndex:0}},g.useGlobalFilter,g.useSortBy,g.usePagination),{getTableProps:_,getTableBodyProps:I,headerGroups:A,prepareRow:$,page:H,canPreviousPage:O,canNextPage:F,pageOptions:V,pageCount:M,gotoPage:R,nextPage:G,previousPage:J,setPageSize:Y,state:{pageIndex:q,pageSize:U}}=B;V.length<W&&T(V.length);const X=(0,o.dU)("secondaryGray.900","white"),K=(0,o.dU)("gray.200","whiteAlpha.100"),Z=(0,C.g)();return(0,w.jsxs)(j.A,{direction:"column",w:"100%",px:"0px",style:{border:"1px solid gray.200"},overflowX:{sm:"scroll",lg:"hidden"},children:[(0,w.jsxs)(t.s,{px:"25px",justify:"space-between",mb:"20px",align:"center",children:[(0,w.jsxs)(i.E,{color:X,fontSize:"22px",fontWeight:"700",lineHeight:"100%",children:[p,"  (",(0,w.jsx)(f.A,{targetNumber:null===z||void 0===z?void 0:z.length}),")"]}),(0,w.jsx)(a.$,{onClick:()=>L(!0),rightIcon:(0,w.jsx)(S.qYP,{}),colorScheme:"gray",children:"Send Email"}),(0,w.jsx)(k.A,{lead:e.lead,fetchData:D,isOpen:N,onClose:L,id:Z.id})]}),(0,w.jsx)(s.a,{overflowY:"auto",className:"table-container p0",children:(0,w.jsxs)(d.X,{..._(),variant:"simple",color:"gray.500",mb:"24px",children:[(0,w.jsx)(r.d,{children:null===A||void 0===A?void 0:A.map(((e,l)=>(0,v.createElement)(c.Tr,{...e.getHeaderGroupProps(),key:l},e.headers.map(((e,l)=>(0,v.createElement)(u.Th,{...e.getHeaderProps(e.getSortByToggleProps()),pe:"10px",key:l,borderColor:K},(0,w.jsx)(t.s,{justify:"space-between",align:"center",fontSize:{sm:"10px",lg:"12px"},color:"gray.400",children:e.render("Header")})))))))}),(0,w.jsx)(x.N,{...I(),children:0===(null===z||void 0===z?void 0:z.length)?(0,w.jsx)(c.Tr,{children:(0,w.jsx)(h.Td,{colSpan:null===E||void 0===E?void 0:E.length,children:(0,w.jsx)(i.E,{textAlign:"center",width:"100%",color:X,fontSize:"sm",fontWeight:"700",children:"-- No Data Found --"})})}):null===H||void 0===H?void 0:H.map(((e,l)=>($(e),(0,v.createElement)(c.Tr,{...null===e||void 0===e?void 0:e.getRowProps(),key:l},null===e||void 0===e?void 0:e.cells.map(((e,l)=>{let n="";if("sender"===(null===e||void 0===e?void 0:e.column.Header))n=(0,w.jsx)(t.s,{align:"center",children:(0,w.jsx)(i.E,{me:"10px",color:X,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value})});else if("recipient"===(null===e||void 0===e?void 0:e.column.Header)){var o,a;n=(0,w.jsx)(t.s,{align:"center",children:(0,w.jsx)(y.N_,{to:"admin"!==(null===P||void 0===P?void 0:P.role)?`/Email/${null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.original._id}`:`/admin/Email/${null===e||void 0===e||null===(a=e.row)||void 0===a?void 0:a.original._id}`,children:(0,w.jsx)(i.E,{sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},color:"green.400",fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value})})})}else if("Created"===(null===e||void 0===e?void 0:e.column.Header)){var s;n=(0,w.jsx)(i.E,{color:X,fontSize:"sm",fontWeight:"700",children:m()(null===e||void 0===e||null===(s=e.row)||void 0===s?void 0:s.values.timestamp).format("h:mma (DD/MM)")})}else"time stamp"===(null===e||void 0===e?void 0:e.column.Header)&&(n=(0,w.jsx)(i.E,{color:X,fontSize:"sm",fontWeight:"700",children:m()(null===e||void 0===e?void 0:e.value).fromNow()}));return(0,v.createElement)(h.Td,{...null===e||void 0===e?void 0:e.getCellProps(),key:l,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"},n)}))))))})]})}),(null===z||void 0===z?void 0:z.length)>5&&(0,w.jsx)(b.A,{gotoPage:R,gopageValue:W,setGopageValue:T,pageCount:M,canPreviousPage:O,previousPage:J,canNextPage:F,pageOptions:V,setPageSize:Y,nextPage:G,pageSize:U,pageIndex:q})]})}},4406:(e,l,n)=>{n.d(l,{A:()=>E});var o=n(4093),t=n(5371),i=n(9081),a=n(9301),s=n(2107),d=n(511),r=n(3313),c=n(5395),u=n(3201),x=n(2595),h=n(7813),p=n(6178),m=n.n(p),v=n(5043),g=n(1094),j=n(216),f=n(6914),b=n(100),S=n(2127),C=n(7149),y=n(3216),k=n(5475),w=n(9250),D=n(579);function E(e){const{columnsData:l,tableData:n,title:p,fetchData:E}=e,z=(0,v.useMemo)((()=>l),[l]),N=(0,v.useMemo)((()=>n),[n]),[L,P]=(0,v.useState)(!1),W=JSON.parse(localStorage.getItem("user")),[T,B]=(0,v.useState)(),_=(0,g.useTable)({columns:z,data:N,initialState:{pageIndex:0}},g.useGlobalFilter,g.useSortBy,g.usePagination),{getTableProps:I,getTableBodyProps:A,headerGroups:$,prepareRow:H,page:O,canPreviousPage:F,canNextPage:V,pageOptions:M,pageCount:R,gotoPage:G,nextPage:J,previousPage:Y,setPageSize:q,state:{pageIndex:U,pageSize:X}}=_;M.length<T&&B(M.length);const K=(0,o.dU)("secondaryGray.900","white"),Z=(0,o.dU)("gray.200","whiteAlpha.100"),Q=(0,y.g)(),ee=(0,y.Zp)();return(0,D.jsxs)(j.A,{direction:"column",w:"100%",px:"0px",style:{border:"1px solid gray.200"},overflowX:{sm:"scroll",lg:"hidden"},children:[(0,D.jsxs)(t.s,{px:"25px",justify:"space-between",mb:"20px",align:"center",children:[(0,D.jsxs)(i.E,{color:K,fontSize:"22px",fontWeight:"700",lineHeight:"100%",children:[p," (",(0,D.jsx)(f.A,{targetNumber:null===N||void 0===N?void 0:N.length}),")"]}),e.text?(0,D.jsx)(a.$,{onClick:()=>ee("/communication-integration"),leftIcon:(0,D.jsx)(C.liL,{}),colorScheme:"gray",children:"send text Msg"}):(0,D.jsx)(a.$,{onClick:()=>P(!0),leftIcon:(0,D.jsx)(S.s91,{}),colorScheme:"gray",children:"Call"}),(0,D.jsx)(w.A,{lead:e.lead,fetchData:E,isOpen:L,onClose:P,id:Q.id})]}),(0,D.jsx)(s.a,{overflowY:"auto",className:"table-container",children:(0,D.jsxs)(d.X,{...I(),variant:"simple",color:"gray.500",mb:"24px",children:[(0,D.jsx)(r.d,{children:null===$||void 0===$?void 0:$.map(((e,l)=>(0,v.createElement)(c.Tr,{...e.getHeaderGroupProps(),key:l},e.headers.map(((e,l)=>(0,v.createElement)(u.Th,{...e.getHeaderProps(e.getSortByToggleProps()),pe:"10px",key:l,borderColor:Z},(0,D.jsx)(t.s,{justify:"space-between",align:"center",fontSize:{sm:"10px",lg:"12px"},color:"gray.400",children:e.render("Header")})))))))}),(0,D.jsxs)(x.N,{...A(),children:[0===(null===N||void 0===N?void 0:N.length)&&(0,D.jsx)(c.Tr,{children:(0,D.jsx)(h.Td,{colSpan:z.length,children:(0,D.jsx)(i.E,{textAlign:"center",width:"100%",color:K,fontSize:"sm",fontWeight:"700",children:"-- No Data Found --"})})}),null===O||void 0===O?void 0:O.map(((l,n)=>(H(l),(0,v.createElement)(c.Tr,{...null===l||void 0===l?void 0:l.getRowProps(),key:n},null===l||void 0===l?void 0:l.cells.map(((l,n)=>{let o="";if("sender"===(null===l||void 0===l?void 0:l.column.Header))o=(0,D.jsx)(t.s,{align:"center",children:(0,D.jsx)(i.E,{fontSize:"sm",color:K,fontWeight:"700",children:null===l||void 0===l?void 0:l.value})});else if("recipient"===(null===l||void 0===l?void 0:l.column.Header)){var a,s,d,r;o=(0,D.jsx)(t.s,{align:"center",children:(0,D.jsx)(k.N_,{to:"admin"!==(null===W||void 0===W?void 0:W.role)?e.text?`/text-msg/${null===l||void 0===l||null===(a=l.row)||void 0===a?void 0:a.original._id}`:`/phone-call/${null===l||void 0===l||null===(s=l.row)||void 0===s?void 0:s.original._id}`:e.text?`/admin/text-msg/${null===l||void 0===l||null===(d=l.row)||void 0===d?void 0:d.original._id}`:`/admin/phone-call/${null===l||void 0===l||null===(r=l.row)||void 0===r?void 0:r.original._id}`,children:(0,D.jsx)(i.E,{me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},color:"green.400",fontSize:"sm",fontWeight:"700",children:null===l||void 0===l?void 0:l.value})})})}else if("Created"===(null===l||void 0===l?void 0:l.column.Header)){var c;o=(0,D.jsx)(i.E,{color:K,fontSize:"sm",fontWeight:"700",children:m()(null===l||void 0===l||null===(c=l.row)||void 0===c?void 0:c.values.timestamp).format("h:mma (DD/MM)")})}else"time stamp"===(null===l||void 0===l?void 0:l.column.Header)&&(o=(0,D.jsx)(i.E,{color:K,fontSize:"sm",fontWeight:"700",children:m()(null===l||void 0===l?void 0:l.value).fromNow()}));return(0,v.createElement)(h.Td,{...null===l||void 0===l?void 0:l.getCellProps(),key:n,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"},o)}))))))]})]})}),(null===N||void 0===N?void 0:N.length)>5&&(0,D.jsx)(b.A,{gotoPage:G,gopageValue:T,setGopageValue:B,pageCount:R,canPreviousPage:F,previousPage:Y,canNextPage:V,pageOptions:M,setPageSize:q,nextPage:J,pageSize:X,pageIndex:U})]})}},6:(e,l,n)=>{n.d(l,{A:()=>k});var o=n(8460),t=n(1054),i=n(5421),a=n(5071),s=n(5929),d=n(7516),r=n(3533),c=n(5527),u=n(6668),x=n(9081),h=n(5699),p=n(9077),m=n(6529),v=n(9301),g=n(9488),j=n(3516),f=n(5043),b=n(2127),S=n(6092),C=n(9621),y=n(579);const k=e=>{const{onClose:l,isOpen:n,fetchData:k}=e,w=JSON.parse(localStorage.getItem("user")),[D,E]=(0,f.useState)(!1),[z,N]=(0,f.useState)(!1),[L,P]=(0,f.useState)(!1),W={sender:null===w||void 0===w?void 0:w._id,recipient:"",subject:"",message:"",createBy:"",createByLead:"",startDate:"",endDate:""},T=(0,j.Wx)({initialValues:W,validationSchema:S.y4,onSubmit:(e,l)=>{let{resetForm:n}=l;F(),n()}}),{errors:B,touched:_,values:I,handleBlur:A,handleChange:$,handleSubmit:H,setFieldValue:O}=T,F=async()=>{try{E(!0),200===(await(0,C.d_)("api/email/add",I)).status&&(e.onClose(),k())}catch(l){console.log(l)}finally{E(!1)}};return(0,f.useEffect)((()=>{(async()=>{if(e.id&&"true"!==e.lead){let i=await(0,C.x4)("api/contact/view/",e.id);var l,n,o,t;200===(null===i||void 0===i?void 0:i.status)&&(O("recipient",null===i||void 0===i||null===(l=i.data)||void 0===l||null===(n=l.contact)||void 0===n?void 0:n.email),O("createBy",e.id),I.recipient=null===i||void 0===i||null===(o=i.data)||void 0===o||null===(t=o.contact)||void 0===t?void 0:t.email)}else if(e.id&&"true"===e.lead){let l=await(0,C.x4)("api/lead/view/",e.id);var i,a,s,d;200===(null===l||void 0===l?void 0:l.status)&&(O("recipient",null===l||void 0===l||null===(i=l.data)||void 0===i||null===(a=i.lead)||void 0===a?void 0:a.leadEmail),O("createByLead",e.id),I.recipient=null===l||void 0===l||null===(s=l.data)||void 0===s||null===(d=s.lead)||void 0===d?void 0:d.leadEmail)}})()}),[e.id]),(0,y.jsxs)(o.aF,{onClose:l,isOpen:n,isCentered:!0,children:[(0,y.jsx)(t.m,{}),(0,y.jsxs)(i.$,{children:[(0,y.jsx)(a.r,{children:"Send Email "}),(0,y.jsx)(s.s,{}),(0,y.jsx)(d.c,{children:(0,y.jsxs)(r.x,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,y.jsxs)(c.E,{colSpan:{base:12},children:[(0,y.jsxs)(u.l,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Recipient",(0,y.jsx)(x.E,{color:"red",children:"*"})]}),(0,y.jsx)(h.p,{fontSize:"sm",onChange:$,onBlur:A,value:I.recipient,name:"recipient",placeholder:"Recipient",fontWeight:"500",borderColor:B.recipient&&_.recipient?"red.300":null}),(0,y.jsxs)(x.E,{mb:"10px",color:"red",children:[" ",B.recipient&&_.recipient&&B.recipient]})]}),(0,y.jsxs)(c.E,{colSpan:{base:12},children:[(0,y.jsx)(u.l,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Subject"}),(0,y.jsx)(h.p,{fontSize:"sm",placeholder:"Enter subject",onChange:$,onBlur:A,value:I.subject,name:"subject",fontWeight:"500",borderColor:B.subject&&_.subject?"red.300":null}),(0,y.jsxs)(x.E,{mb:"10px",color:"red",children:[" ",B.subject&&_.subject&&B.subject]})]}),(0,y.jsxs)(c.E,{colSpan:{base:12,md:6},children:[(0,y.jsx)(u.l,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Start Date"}),(0,y.jsx)(h.p,{type:"datetime-local",fontSize:"sm",onChange:$,onBlur:A,value:I.startDate,name:"startDate",fontWeight:"500",borderColor:null!==B&&void 0!==B&&B.startDate&&null!==_&&void 0!==_&&_.startDate?"red.300":null}),(0,y.jsxs)(x.E,{mb:"10px",color:"red",children:[" ",B.startDate&&_.startDate&&B.startDate]})]}),(0,y.jsxs)(c.E,{colSpan:{base:12,md:6},children:[(0,y.jsx)(u.l,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"End Date"}),(0,y.jsx)(h.p,{type:"datetime-local",fontSize:"sm",onChange:$,onBlur:A,value:I.endDate,name:"endDate",fontWeight:"500",borderColor:null!==B&&void 0!==B&&B.endDate&&null!==_&&void 0!==_&&_.endDate?"red.300":null}),(0,y.jsxs)(x.E,{mb:"10px",color:"red",children:[" ",B.endDate&&_.endDate&&B.endDate]})]}),(0,y.jsxs)(c.E,{colSpan:{base:12},children:[(0,y.jsx)(u.l,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Message"}),(0,y.jsx)(p.T,{fontSize:"sm",placeholder:"Here Type message",resize:"none",onChange:$,onBlur:A,value:I.message,name:"message",fontWeight:"500",borderColor:B.message&&_.message?"red.300":null}),(0,y.jsxs)(x.E,{mb:"10px",color:"red",children:[" ",B.message&&_.message&&B.message]})]})]})}),(0,y.jsxs)(m.j,{children:[(0,y.jsx)(v.$,{variant:"brand",onClick:H,rightIcon:(0,y.jsx)(b.qYP,{}),disabled:!!D,children:D?(0,y.jsx)(g.A,{}):"Send"}),(0,y.jsx)(v.$,{onClick:()=>{T.resetForm(),l()},children:"Close"})]})]})]})}},6654:(e,l,n)=>{n.d(l,{A:()=>A});var o=n(7492),t=n(8460),i=n(1054),a=n(5421),s=n(5071),d=n(5929),r=n(7516),c=n(3533),u=n(5527),x=n(6668),h=n(9081),p=n(5699),m=n(6686),v=n(9904),g=n(4812),j=n(5371),f=n(2703),b=n(9077),S=n(6529),C=n(9301),y=n(8587),k=n(5043),w=n(1046),D=n(9621),E=n(9488),z=n(8860),N=n(579);const L=e=>{const{onClose:l,isOpen:n,fieldName:o,setFieldValue:c}=e,[u,x]=(0,k.useState)([]),[h,p]=(0,k.useState)(!1),[m,v]=(0,k.useState)([]),g=JSON.parse(localStorage.getItem("user")),f=[...new Set(u)];return(0,k.useEffect)((()=>{(async()=>{p(!0);let e=await(0,D.x4)("admin"===g.role?"api/contact/":`api/contact/?createBy=${g._id}`);e&&200==e.status&&v(null===e||void 0===e?void 0:e.data),p(!1)})()}),[]),(0,N.jsxs)(t.aF,{onClose:l,size:"full",isOpen:n,children:[(0,N.jsx)(i.m,{}),(0,N.jsxs)(a.$,{children:[(0,N.jsx)(s.r,{children:"Select Contact"}),(0,N.jsx)(d.s,{}),(0,N.jsx)(r.c,{children:h?(0,N.jsx)(j.s,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,N.jsx)(E.A,{})}):(0,N.jsx)(w.A,{tableData:m,type:"multi",selectedValues:u,setSelectedValues:x,columnsData:[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"title",accessor:"title"},{Header:"first Name",accessor:"firstName"},{Header:"last Name",accessor:"lastName"},{Header:"phone Number",accessor:"phoneNumber"},{Header:"Email Address",accessor:"email"},{Header:"physical Address",accessor:"physicalAddress"},{Header:"mailing Address",accessor:"mailingAddress"},{Header:"Contact Method",accessor:"preferredContactMethod"}],title:"Contact"})}),(0,N.jsxs)(S.j,{children:[(0,N.jsxs)(C.$,{variant:"brand",onClick:async()=>{try{p(!0),c(o,f),l()}catch(e){console.log(e)}finally{p(!1)}},disabled:!!h,leftIcon:(0,N.jsx)(z.NLY,{}),children:[" ",h?(0,N.jsx)(E.A,{}):"Select"]}),(0,N.jsx)(C.$,{onClick:()=>l(),children:"Close"})]})]})]})};var P=n(7214);const W=e=>{const{onClose:l,isOpen:n,fieldName:o,setFieldValue:c}=e,[u,x]=(0,k.useState)([]),[h,p]=(0,k.useState)(!1),[m,v]=(0,k.useState)([]),g=JSON.parse(localStorage.getItem("user")),f=[...new Set(u)];return(0,k.useEffect)((()=>{(async()=>{p(!0);let e=await(0,D.x4)("admin"===g.role?"api/lead/":`api/lead/?createBy=${g._id}`);e&&200==e.status&&v(null===e||void 0===e?void 0:e.data),p(!1)})()}),[]),(0,N.jsxs)(t.aF,{onClose:l,size:"full",isOpen:n,children:[(0,N.jsx)(i.m,{}),(0,N.jsxs)(a.$,{children:[(0,N.jsx)(s.r,{children:"Select Lead"}),(0,N.jsx)(d.s,{}),(0,N.jsx)(r.c,{children:h?(0,N.jsx)(j.s,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,N.jsx)(E.A,{})}):(0,N.jsx)(P.A,{tableData:m,type:"multi",selectedValues:u,setSelectedValues:x,columnsData:[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"Lead Name",accessor:"leadName",width:20},{Header:"Lead Email",accessor:"leadEmail"},{Header:"Lead PhoneNumber",accessor:"leadPhoneNumber"},{Header:"Lead Address",accessor:"leadAddress"},{Header:"Lead Status",accessor:"leadStatus"},{Header:"Lead Owner",accessor:"leadOwner"},{Header:"Lead Score",accessor:"leadScore"}],title:"Lead"})}),(0,N.jsxs)(S.j,{children:[(0,N.jsxs)(C.$,{variant:"brand",onClick:async()=>{try{p(!0),c(o,f),l()}catch(e){console.log(e)}finally{p(!1)}},disabled:!!h,leftIcon:(0,N.jsx)(z.NLY,{}),children:[" ",h?(0,N.jsx)(E.A,{}):"Select"]}),(0,N.jsx)(C.$,{onClick:()=>l(),children:"Close"})]})]})]})};var T=n(3516),B=n(3388),_=n(2145),I=n(6092);const A=e=>{const{onClose:l,isOpen:n,fetchData:w,from:z}=e,[P,A]=(0,k.useState)([]),[$,H]=(0,k.useState)(!1),[O,F]=(0,k.useState)(!1),[V,M]=(0,k.useState)(!1),R=JSON.parse(localStorage.getItem("user")),G={agenda:"",attendes:[],attendesLead:[],location:"",related:z||"",dateTime:"",notes:"",createdBy:null===R||void 0===R?void 0:R._id},J=(0,T.Wx)({initialValues:G,validationSchema:I.pq,onSubmit:(e,l)=>{let{resetForm:n}=l;ee()}}),{errors:Y,touched:q,values:U,handleBlur:X,handleChange:K,handleSubmit:Z,setFieldValue:Q}=J,ee=async()=>{try{if(H(!0),U.attendes.length>0||U.attendesLead.length>0){200===(await(0,D.d_)("api/meeting/add",U)).status&&(J.resetForm(),e.onClose(),w())}else _.oR.error("Select Related To")}catch(l){console.log(l)}finally{H(!1)}};(0,k.useEffect)((()=>{(async()=>{var e;let l;"contact"===U.related?l=await(0,D.x4)("admin"===R.role?"api/contact/":`api/contact/?createBy=${R._id}`):"lead"===U.related&&(l=await(0,D.x4)("admin"===R.role?"api/lead/":`api/lead/?createBy=${R._id}`)),A(null===(e=l)||void 0===e?void 0:e.data)})()}),[e.id,U.related]);const le=null===P||void 0===P?void 0:P.map((e=>({...e,value:e._id,label:"contact"===U.related?`${e.firstName} ${e.lastName}`:e.leadName})));return(0,N.jsxs)(t.aF,{onClose:l,isOpen:n,children:[(0,N.jsx)(i.m,{}),(0,N.jsxs)(a.$,{children:[(0,N.jsx)(s.r,{children:"Add Meeting "}),(0,N.jsx)(d.s,{}),(0,N.jsxs)(r.c,{children:[(0,N.jsx)(L,{isOpen:O,onClose:F,fieldName:"attendes",setFieldValue:Q}),(0,N.jsx)(W,{isOpen:V,onClose:M,fieldName:"attendesLead",setFieldValue:Q}),(0,N.jsxs)(c.x,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,N.jsxs)(u.E,{colSpan:{base:12},children:[(0,N.jsxs)(x.l,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Agenda",(0,N.jsx)(h.E,{color:"red",children:"*"})]}),(0,N.jsx)(p.p,{fontSize:"sm",onChange:K,onBlur:X,value:U.agenda,name:"agenda",placeholder:"Agenda",fontWeight:"500",borderColor:Y.agenda&&q.agenda?"red.300":null}),(0,N.jsxs)(h.E,{mb:"10px",color:"red",children:[" ",Y.agenda&&q.agenda&&Y.agenda]})]}),(0,N.jsxs)(u.E,{colSpan:{base:12},children:[(0,N.jsx)(x.l,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"related To"}),(0,N.jsx)(m.z,{onChange:e=>Q("related",e),value:U.related,children:(0,N.jsxs)(v.B,{direction:"row",children:[(0,N.jsx)(g.s,{value:"contact",children:"Contact"}),(0,N.jsx)(g.s,{value:"lead",children:"Lead"})]})}),(0,N.jsxs)(h.E,{mb:"10px",color:"red",children:[" ",Y.related&&q.related&&Y.related]})]}),(null===P||void 0===P?void 0:P.length)>0&&U.related&&(0,N.jsxs)(u.E,{colSpan:{base:12},children:[(0,N.jsxs)(j.s,{alignItems:"end",justifyContent:"space-between",children:[(0,N.jsx)(h.E,{w:"100%",children:(0,N.jsx)(y.CUIAutoComplete,{label:`Choose Preferred Attendes ${"contact"===U.related?"Contact":"lead"===U.related&&"Lead"}`,placeholder:"Type a Name",name:"attendes",items:le,selectedItems:null===le||void 0===le?void 0:le.filter((e=>"contact"===U.related?null===U||void 0===U?void 0:U.attendes.includes(e._id):"lead"===U.related&&(null===U||void 0===U?void 0:U.attendesLead.includes(e._id)))),onSelectedItemsChange:e=>{const l=e.selectedItems.map((e=>e._id));"contact"===U.related?Q("attendes",l):"lead"===U.related&&Q("attendesLead",l)}})}),(0,N.jsx)(f.K,{mb:6,onClick:()=>"contact"===U.related?F(!0):"lead"===U.related&&M(!0),fontSize:"25px",icon:(0,N.jsx)(B.G2h,{})})]}),(0,N.jsxs)(h.E,{color:"red",children:[" ",Y.attendes&&q.attendes&&Y.attendes]})]}),(0,N.jsxs)(u.E,{colSpan:{base:12},children:[(0,N.jsx)(x.l,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Location"}),(0,N.jsx)(p.p,{fontSize:"sm",onChange:K,onBlur:X,value:U.location,name:"location",placeholder:"Location",fontWeight:"500",borderColor:Y.location&&q.location?"red.300":null}),(0,N.jsxs)(h.E,{mb:"10px",color:"red",children:[" ",Y.location&&q.location&&Y.location]})]}),(0,N.jsxs)(u.E,{colSpan:{base:12},children:[(0,N.jsx)(x.l,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Date Time"}),(0,N.jsx)(p.p,{fontSize:"sm",type:"datetime-local",onChange:K,onBlur:X,value:U.dateTime,name:"dateTime",placeholder:"Date Time",fontWeight:"500",borderColor:Y.dateTime&&q.dateTime?"red.300":null}),(0,N.jsxs)(h.E,{mb:"10px",color:"red",children:[" ",Y.dateTime&&q.dateTime&&Y.dateTime]})]}),(0,N.jsxs)(u.E,{colSpan:{base:12},children:[(0,N.jsx)(x.l,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Notes"}),(0,N.jsx)(b.T,{resize:"none",fontSize:"sm",placeholder:"Notes",onChange:K,onBlur:X,value:U.notes,name:"notes",fontWeight:"500",borderColor:Y.notes&&q.notes?"red.300":null}),(0,N.jsxs)(h.E,{mb:"10px",color:"red",children:[" ",Y.notes&&q.notes&&Y.notes]})]})]})]}),(0,N.jsxs)(S.j,{children:[(0,N.jsx)(C.$,{variant:"brand",leftIcon:(0,N.jsx)(o.R,{}),disabled:!!$,onClick:Z,children:$?(0,N.jsx)(E.A,{}):"Add"}),(0,N.jsx)(C.$,{onClick:()=>{J.resetForm(),l()},children:"Close"})]})]})]})}},618:(e,l,n)=>{n.d(l,{A:()=>D});var o=n(4093),t=n(5371),i=n(9081),a=n(9301),s=n(2107),d=n(511),r=n(3313),c=n(5395),u=n(3201),x=n(2595),h=n(7813),p=n(5043),m=n(1094),v=n(216),g=n(6914),j=n(100),f=n(9488),b=n(6178),S=n.n(b),C=n(5369),y=n(3784),k=n(5475),w=n(579);function D(e){const{columnsData:l,data:n,isLoding:b,setMeeting:D,className:E}=e,z=(0,o.dU)("secondaryGray.900","white"),N=(0,o.dU)("gray.200","whiteAlpha.100"),L=(0,p.useMemo)((()=>l),[l]),P=JSON.parse(localStorage.getItem("user")),[W,T]=(0,p.useState)(),B=(0,m.useTable)({columns:L,data:n,initialState:{pageIndex:0}},m.useGlobalFilter,m.useSortBy,m.usePagination),{getTableProps:_,getTableBodyProps:I,headerGroups:A,prepareRow:$,page:H,canPreviousPage:O,canNextPage:F,pageOptions:V,pageCount:M,gotoPage:R,nextPage:G,previousPage:J,setPageSize:Y,state:{pageIndex:q,pageSize:U}}=B;return V.length<W&&T(V.length),(0,w.jsxs)(v.A,{direction:"column",w:"100%",px:"0px",overflowX:{sm:"scroll",lg:"hidden"},children:[(0,w.jsxs)(t.s,{px:"25px",justify:"space-between",mb:"20px",align:"center",children:[(0,w.jsxs)(i.E,{color:z,fontSize:"22px",fontWeight:"700",lineHeight:"100%",children:["Meetings (",(0,w.jsx)(g.A,{targetNumber:null===n||void 0===n?void 0:n.length}),")"]}),D&&(0,w.jsx)(a.$,{onClick:()=>D(!0),leftIcon:(0,w.jsx)(y.xwM,{}),colorScheme:"gray",children:"Add Meeting "})]}),(0,w.jsx)(s.a,{overflowY:"auto",className:E,children:(0,w.jsxs)(d.X,{..._(),variant:"simple",color:"gray.500",mb:"24px",children:[(0,w.jsx)(r.d,{children:null===A||void 0===A?void 0:A.map(((e,l)=>{var n;return(0,p.createElement)(c.Tr,{...e.getHeaderGroupProps(),key:l},null===(n=e.headers)||void 0===n?void 0:n.map(((e,l)=>(0,p.createElement)(u.Th,{...e.getHeaderProps(!1!==e.isSortable&&e.getSortByToggleProps()),pe:"10px",key:l,borderColor:N},(0,w.jsxs)(t.s,{justify:"space-between",align:"center",fontSize:{sm:"10px",lg:"12px"},color:"gray.400",children:[e.render("Header"),!1!==e.isSortable&&(0,w.jsx)("span",{children:e.isSorted?e.isSortedDesc?(0,w.jsx)(C.GOR,{}):(0,w.jsx)(C.XhJ,{}):(0,w.jsx)(C.MjW,{})})]})))))}))}),(0,w.jsx)(x.N,{...I(),children:b?(0,w.jsx)(c.Tr,{children:(0,w.jsx)(h.Td,{colSpan:null===L||void 0===L?void 0:L.length,children:(0,w.jsx)(t.s,{justifyContent:"center",alignItems:"center",width:"100%",color:z,fontSize:"sm",fontWeight:"700",children:(0,w.jsx)(f.A,{})})})}):0===(null===n||void 0===n?void 0:n.length)?(0,w.jsx)(c.Tr,{children:(0,w.jsx)(h.Td,{colSpan:L.length,children:(0,w.jsx)(i.E,{textAlign:"center",width:"100%",color:z,fontSize:"sm",fontWeight:"700",children:"-- No Data Found --"})})}):(null===n||void 0===n?void 0:n.length)>0&&(null===H||void 0===H?void 0:H.map(((e,l)=>{var n;return $(e),(0,p.createElement)(c.Tr,{...null===e||void 0===e?void 0:e.getRowProps(),key:l},null===e||void 0===e||null===(n=e.cells)||void 0===n?void 0:n.map(((e,l)=>{let n="";var o;if("#"===(null===e||void 0===e?void 0:e.column.Header))n=(0,w.jsx)(t.s,{align:"center",children:(0,w.jsx)(i.E,{color:z,fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.index)+1})});else if("agenda"===(null===e||void 0===e?void 0:e.column.Header)){var a,s;n=(0,w.jsx)(k.N_,{to:"admin"!==(null===P||void 0===P?void 0:P.role)?`/metting/${null===e||void 0===e||null===(a=e.row)||void 0===a?void 0:a.values._id}`:`/admin/metting/${null===e||void 0===e||null===(s=e.row)||void 0===s?void 0:s.values._id}`,children:(0,w.jsx)(i.E,{me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},color:"green.400",fontSize:"sm",fontWeight:"700",children:null!==e&&void 0!==e&&e.value?null===e||void 0===e?void 0:e.value:" - "})})}else"date Time"===(null===e||void 0===e?void 0:e.column.Header)?n=(0,w.jsx)(i.E,{me:"10px",color:z,fontSize:"sm",fontWeight:"700",children:S()(null===e||void 0===e?void 0:e.value).format("D/MM/YYYY LT")}):"create By"===(null===e||void 0===e?void 0:e.column.Header)?n=(0,w.jsx)(i.E,{me:"10px",color:z,fontSize:"sm",fontWeight:"700",children:null!==e&&void 0!==e&&e.value?null===e||void 0===e?void 0:e.value:" - "}):"times tamp"===(null===e||void 0===e?void 0:e.column.Header)&&(n=(0,w.jsx)(i.E,{color:z,fontSize:"sm",fontWeight:"700",children:S()(null===e||void 0===e?void 0:e.value).format("(DD/MM) LT")}));return(0,p.createElement)(h.Td,{...null===e||void 0===e?void 0:e.getCellProps(),key:l,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"},n)})))})))})]})}),(null===n||void 0===n?void 0:n.length)>5&&(0,w.jsx)(j.A,{gotoPage:R,gopageValue:W,setGopageValue:T,pageCount:M,canPreviousPage:O,previousPage:J,canNextPage:F,pageOptions:V,setPageSize:Y,nextPage:G,pageSize:U,pageIndex:q})]})}},9250:(e,l,n)=>{n.d(l,{A:()=>k});var o=n(8460),t=n(1054),i=n(5421),a=n(5071),s=n(5929),d=n(7516),r=n(3533),c=n(5527),u=n(6668),x=n(9081),h=n(5699),p=n(9077),m=n(6529),v=n(9301),g=n(9488),j=n(3516),f=n(5043),b=n(2127),S=n(6092),C=n(9621),y=n(579);const k=e=>{const{onClose:l,isOpen:n,fetchData:k}=e,[w,D]=(0,f.useState)(!1),E=JSON.parse(localStorage.getItem("user")),z={sender:null===E||void 0===E?void 0:E._id,recipient:"",callDuration:"",callNotes:"",createBy:"",createByLead:"",startDate:"",endDate:""},N=(0,j.Wx)({initialValues:z,validationSchema:S.Ar,onSubmit:(e,l)=>{let{resetForm:n}=l;A(),n()}}),{errors:L,touched:P,values:W,handleBlur:T,handleChange:B,handleSubmit:_,setFieldValue:I}=N,A=async()=>{try{D(!0),200===(await(0,C.d_)("api/phoneCall/add",W)).status&&(e.onClose(),k())}catch(l){console.log(l)}finally{D(!1)}};return(0,f.useEffect)((()=>{(async()=>{if(e.id&&"true"!==e.lead){let i=await(0,C.x4)("api/contact/view/",e.id);var l,n,o,t;200===(null===i||void 0===i?void 0:i.status)&&(I("recipient",null===i||void 0===i||null===(l=i.data)||void 0===l||null===(n=l.contact)||void 0===n?void 0:n.phoneNumber),I("createBy",null===e||void 0===e?void 0:e.id),W.recipient=null===i||void 0===i||null===(o=i.data)||void 0===o||null===(t=o.contact)||void 0===t?void 0:t.phoneNumber)}else if(e.id&&"true"===e.lead){let l=await(0,C.x4)("api/lead/view/",e.id);var i,a,s,d;200===(null===l||void 0===l?void 0:l.status)&&(I("recipient",null===l||void 0===l||null===(i=l.data)||void 0===i||null===(a=i.lead)||void 0===a?void 0:a.leadPhoneNumber),I("createByLead",e.id),W.recipient=null===l||void 0===l||null===(s=l.data)||void 0===s||null===(d=s.lead)||void 0===d?void 0:d.leadPhoneNumber)}})()}),[e.id]),(0,y.jsxs)(o.aF,{onClose:l,isOpen:n,isCentered:!0,children:[(0,y.jsx)(t.m,{}),(0,y.jsxs)(i.$,{children:[(0,y.jsx)(a.r,{children:"Add Call "}),(0,y.jsx)(s.s,{}),(0,y.jsx)(d.c,{children:(0,y.jsxs)(r.x,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,y.jsxs)(c.E,{colSpan:{base:12},children:[(0,y.jsxs)(u.l,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Recipient",(0,y.jsx)(x.E,{color:"red",children:"*"})]}),(0,y.jsx)(h.p,{fontSize:"sm",type:"number",onChange:B,onBlur:T,value:W.recipient,name:"recipient",placeholder:"Recipient",fontWeight:"500",borderColor:L.recipient&&P.recipient?"red.300":null}),(0,y.jsxs)(x.E,{mb:"10px",color:"red",children:[" ",L.recipient&&P.recipient&&L.recipient]})]}),(0,y.jsxs)(c.E,{colSpan:{base:12,md:6},children:[(0,y.jsx)(u.l,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Start Date"}),(0,y.jsx)(h.p,{type:"datetime-local",fontSize:"sm",onChange:B,onBlur:T,value:W.startDate,name:"startDate",fontWeight:"500",borderColor:null!==L&&void 0!==L&&L.startDate&&null!==P&&void 0!==P&&P.startDate?"red.300":null}),(0,y.jsxs)(x.E,{mb:"10px",color:"red",children:[" ",L.startDate&&P.startDate&&L.startDate]})]}),(0,y.jsxs)(c.E,{colSpan:{base:12,md:6},children:[(0,y.jsx)(u.l,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"End Date"}),(0,y.jsx)(h.p,{type:"datetime-local",fontSize:"sm",onChange:B,onBlur:T,value:W.endDate,name:"endDate",fontWeight:"500",borderColor:null!==L&&void 0!==L&&L.endDate&&null!==P&&void 0!==P&&P.endDate?"red.300":null}),(0,y.jsxs)(x.E,{mb:"10px",color:"red",children:[" ",L.endDate&&P.endDate&&L.endDate]})]}),(0,y.jsxs)(c.E,{colSpan:{base:12},children:[(0,y.jsxs)(u.l,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Call Duration",(0,y.jsx)(x.E,{color:"red",children:"*"})]}),(0,y.jsx)(h.p,{fontSize:"sm",onChange:B,onBlur:T,value:W.callDuration,name:"callDuration",placeholder:"call Duration",fontWeight:"500",borderColor:L.callDuration&&P.callDuration?"red.300":null}),(0,y.jsxs)(x.E,{mb:"10px",color:"red",children:[" ",L.callDuration&&P.callDuration&&L.callDuration]})]}),(0,y.jsxs)(c.E,{colSpan:{base:12},children:[(0,y.jsx)(u.l,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Call Notes"}),(0,y.jsx)(p.T,{resize:"none",fontSize:"sm",placeholder:"Enter Call Notes",onChange:B,onBlur:T,value:W.callNotes,name:"callNotes",fontWeight:"500",borderColor:L.callNotes&&P.callNotes?"red.300":null}),(0,y.jsxs)(x.E,{mb:"10px",color:"red",children:[" ",L.callNotes&&P.callNotes&&L.callNotes]})]})]})}),(0,y.jsxs)(m.j,{children:[(0,y.jsx)(v.$,{variant:"brand",leftIcon:(0,y.jsx)(b.s91,{}),disabled:!!w,onClick:_,children:w?(0,y.jsx)(g.A,{}):"Call"}),(0,y.jsx)(v.$,{onClick:()=>{N.resetForm(),l()},children:"Close"})]})]})]})}},5874:(e,l,n)=>{n.d(l,{D:()=>o});const o=(0,n(4010).w)({displayName:"ChevronDownIcon",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})},7639:(e,l,n)=>{n.d(l,{N:()=>s});var o=n(579),t=n(4765),i=n(9883),a=n(5334);const s=e=>{const{className:l,...n}=e,s=(0,i.$)();return(0,o.jsx)(a.B.hr,{"aria-orientation":"horizontal",className:(0,t.cx)("chakra-menu__divider",l),...n,__css:s.divider})};s.displayName="MenuDivider"},1411:(e,l,n)=>{n.d(l,{w:()=>c});var o=n(579),t=n(3130),i=n(4765),a=n(3109),s=n(7547),d=n(5003),r=n(5334);const c=(0,d.R)((function(e,l){const n=(0,s.$c)({...e,ref:l}),d=(0,a.e)(),c=(0,t.H2)({display:"flex",...d.tablist});return(0,o.jsx)(r.B.div,{...n,className:(0,i.cx)("chakra-tabs__tablist",e.className),__css:c})}));c.displayName="TabList"},227:(e,l,n)=>{n.d(l,{K:()=>r});var o=n(579),t=n(4765),i=n(3109),a=n(7547),s=n(5003),d=n(5334);const r=(0,s.R)((function(e,l){const n=(0,a.Jn)({...e,ref:l}),s=(0,i.e)();return(0,o.jsx)(d.B.div,{outline:"0",...n,className:(0,t.cx)("chakra-tabs__tab-panel",e.className),__css:s.tabpanel})}));r.displayName="TabPanel"},1794:(e,l,n)=>{n.d(l,{T:()=>r});var o=n(579),t=n(4765),i=n(3109),a=n(7547),s=n(5003),d=n(5334);const r=(0,s.R)((function(e,l){const n=(0,a.uo)(e),s=(0,i.e)();return(0,o.jsx)(d.B.div,{...n,width:"100%",ref:l,className:(0,t.cx)("chakra-tabs__tab-panels",e.className),__css:s.tabpanels})}));r.displayName="TabPanels"},4566:(e,l,n)=>{n.d(l,{o:()=>c});var o=n(579),t=n(3130),i=n(4765),a=n(3109),s=n(7547),d=n(5003),r=n(5334);const c=(0,d.R)((function(e,l){const n=(0,a.e)(),d=(0,s.Vh)({...e,ref:l}),c=(0,t.H2)({outline:"0",display:"flex",alignItems:"center",justifyContent:"center",...n.tab});return(0,o.jsx)(r.B.button,{...d,className:(0,i.cx)("chakra-tabs__tab",e.className),__css:c})}));c.displayName="Tab"},3109:(e,l,n)=>{n.d(l,{e:()=>h,t:()=>p});var o=n(579),t=n(3033),i=n(6417),a=n(4765),s=n(5043),d=n(7547),r=n(5003),c=n(5158),u=n(5334);const[x,h]=(0,i.q)({name:"TabsStylesContext",errorMessage:"useTabsStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Tabs />\" "}),p=(0,r.R)((function(e,l){const n=(0,c.o)("Tabs",e),{children:i,className:r,...h}=(0,t.M)(e),{htmlProps:p,descendants:m,...v}=(0,d.uc)(h),g=(0,s.useMemo)((()=>v),[v]),{isFitted:j,...f}=p,b={position:"relative",...n.root};return(0,o.jsx)(d.at,{value:m,children:(0,o.jsx)(d.O_,{value:g,children:(0,o.jsx)(x,{value:n,children:(0,o.jsx)(u.B.div,{className:(0,a.cx)("chakra-tabs",r),ref:l,...f,__css:b,children:i})})})})}));p.displayName="Tabs"},7547:(e,l,n)=>{n.d(l,{$c:()=>f,Jn:()=>k,O_:()=>g,Vh:()=>b,at:()=>x,uc:()=>v,uo:()=>y});var o=n(7212),t=n(3194),i=n(6417),a=n(7246),s=n(4881),d=n(2398),r=n(5043),c=n(2315),u=n(6814);const[x,h,p,m]=(0,c.D)();function v(e){const{defaultIndex:l,onChange:n,index:t,isManual:i,isLazy:a,lazyBehavior:s="unmount",orientation:d="horizontal",direction:c="ltr",...u}=e,[x,h]=(0,r.useState)(l??0),[m,v]=(0,o.i)({defaultValue:l??0,value:t,onChange:n});(0,r.useEffect)((()=>{null!=t&&h(t)}),[t]);const g=p(),j=(0,r.useId)();return{id:`tabs-${e.id??j}`,selectedIndex:m,focusedIndex:x,setSelectedIndex:v,setFocusedIndex:h,isManual:i,isLazy:a,lazyBehavior:s,orientation:d,descendants:g,direction:c,htmlProps:u}}const[g,j]=(0,i.q)({name:"TabsContext",errorMessage:"useTabsContext: `context` is undefined. Seems you forgot to wrap all tabs components within <Tabs />"});function f(e){const{focusedIndex:l,orientation:n,direction:o}=j(),t=h(),i=(0,r.useCallback)((e=>{const i=()=>{const e=t.nextEnabled(l);e&&e.node?.focus()},a=()=>{const e=t.prevEnabled(l);e&&e.node?.focus()},s="horizontal"===n,d="vertical"===n,r=e.key,c="ltr"===o?"ArrowLeft":"ArrowRight",u="ltr"===o?"ArrowRight":"ArrowLeft",x={[c]:()=>s&&a(),[u]:()=>s&&i(),ArrowDown:()=>d&&i(),ArrowUp:()=>d&&a(),Home:()=>{const e=t.firstEnabled();e&&e.node?.focus()},End:()=>{const e=t.lastEnabled();e&&e.node?.focus()}}[r];x&&(e.preventDefault(),x(e))}),[t,l,n,o]);return{...e,role:"tablist","aria-orientation":n,onKeyDown:(0,a.H)(e.onKeyDown,i)}}function b(e){const{isDisabled:l=!1,isFocusable:n=!1,...o}=e,{setSelectedIndex:i,isManual:s,id:d,setFocusedIndex:r,selectedIndex:c}=j(),{index:x,register:h}=m({disabled:l&&!n}),p=x===c;return{...(0,u.I)({...o,ref:(0,t.Px)(h,e.ref),isDisabled:l,isFocusable:n,onClick:(0,a.H)(e.onClick,(()=>{i(x)}))}),id:w(d,x),role:"tab",tabIndex:p?0:-1,type:"button","aria-selected":p,"aria-controls":D(d,x),onFocus:l?void 0:(0,a.H)(e.onFocus,(()=>{r(x);!s&&!(l&&n)&&i(x)}))}}const[S,C]=(0,i.q)({});function y(e){const l=j(),{id:n,selectedIndex:o}=l,t=(0,s.a)(e.children).map(((e,l)=>(0,r.createElement)(S,{key:e.key??l,value:{isSelected:l===o,id:D(n,l),tabId:w(n,l),selectedIndex:o}},e)));return{...e,children:t}}function k(e){const{children:l,...n}=e,{isLazy:o,lazyBehavior:t}=j(),{isSelected:i,id:a,tabId:s}=C(),c=(0,r.useRef)(!1);i&&(c.current=!0);return{tabIndex:0,...n,children:(0,d.q)({wasSelected:c.current,isSelected:i,enabled:o,mode:t})?l:null,role:"tabpanel","aria-labelledby":s,hidden:!i,id:a}}function w(e,l){return`${e}--tab-${l}`}function D(e,l){return`${e}--tabpanel-${l}`}}}]);
//# sourceMappingURL=2155.13a6f39c.chunk.js.map