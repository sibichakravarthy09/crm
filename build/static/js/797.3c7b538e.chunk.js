"use strict";(self.webpackChunkcrm=self.webpackChunkcrm||[]).push([[797],{7488:(e,l,i)=>{i.r(l),i.d(l,{default:()=>f});var n=i(5043),o=i(9621),d=i(7285),t=i(216),s=i(4625),a=i(7807),r=i(3806),c=i(3924),v=i(3805),u=i(6870),h=i(8876),x=i(7930),m=i(2942),j=i(579);const p=e=>{const{data:l,fetchData:i}=e,[o,p]=(0,n.useState)(!1),[f,b]=(0,n.useState)(null),[k,S]=(0,n.useState)(null),{isOpen:g,onOpen:E,onClose:y}=(0,u.j)(),[T,A]=(0,n.useState)("");return(0,n.useEffect)((()=>{A("dayGridMonth")}),[]),(0,j.jsx)("div",{children:(0,j.jsxs)(t.A,{children:[(0,j.jsx)(x.A,{isOpen:g,fetchData:i,onClose:y,date:k}),(0,j.jsx)(m.A,{fetchData:i,isOpen:o,onClose:()=>p(!1),info:f}),(0,j.jsx)(d.A,{plugins:[s.A,v.A,r.A,a.Ay,c.A],initialView:T,height:"600px",dateClick:e=>{S(e.dateStr),E()},events:l,headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek,multiMonthFourMonth"},eventClick:e=>{b(e),p(!0)},buttonText:{today:"Today",dayGridMonth:"Month",timeGridWeek:"Week",timeGridDay:"Day",listWeek:"List"},views:{multiMonthFourMonth:{type:"multiMonth",buttonText:"Multi Month",duration:{months:(0,h.A)({base:4,lg:4,xl:6})}}},eventClassNames:"custom-fullcalendar"})]})})},f=()=>{const[e,l]=(0,n.useState)([]),[i,d]=(0,n.useState)(!0),[t,s]=(0,n.useState)(null),a=JSON.parse(localStorage.getItem("user")),r=async()=>{try{const e=await(0,o.x4)("admin"===a.role?"api/task/":`api/task/?createBy=${a._id}`);l(e.data)}catch(e){s("Failed to fetch data. Please try again later.")}finally{d(!1)}};return(0,n.useEffect)((()=>{r()}),[]),i?(0,j.jsx)("div",{children:"Loading..."}):t?(0,j.jsx)("div",{style:{color:"red"},children:t}):(0,j.jsx)(p,{fetchData:r,data:e})}},2942:(e,l,i)=>{i.d(l,{A:()=>z});var n=i(7575),o=i(2825),d=i(9973),t=i(8584),s=i(8460),a=i(1054),r=i(5421),c=i(5071),v=i(2703),u=i(5371),h=i(7516),x=i(3533),m=i(5527),j=i(9081),p=i(6529),f=i(9488),b=i(6178),k=i.n(b),S=i(5043),g=i(7805),E=i(5475),y=i(9621),T=i(9644),A=i(591),C=i(3216),w=i(579);const z=e=>{var l,i,b,z,W,D;const{onClose:_,isOpen:M,info:L,fetchData:O}=e,[$,N]=(0,S.useState)(),[G,P]=(0,S.useState)(!1),[F,K]=(0,S.useState)(!1),R=JSON.parse(localStorage.getItem("user")),[V,B]=(0,S.useState)(!1),I=(0,C.Zp)();(0,S.useEffect)((()=>{(async()=>{if(L){var e,l,i;B(!0);let n=await(0,y.x4)("api/task/view/",null!==L&&void 0!==L&&L.event?null===L||void 0===L||null===(e=L.event)||void 0===e||null===(l=e._def)||void 0===l||null===(i=l.extendedProps)||void 0===i?void 0:i._id:L);N(null===n||void 0===n?void 0:n.data),B(!1)}})()}),[L]);return(0,w.jsxs)(s.aF,{isOpen:M,size:"md",isCentered:!0,children:[(0,w.jsx)(a.m,{}),(0,w.jsxs)(r.$,{children:[(0,w.jsxs)(c.r,{justifyContent:"space-between",display:"flex",children:["Task",(0,w.jsx)(v.K,{onClick:()=>_(!1),icon:(0,w.jsx)(n.U,{})})]}),V?(0,w.jsx)(u.s,{justifyContent:"center",alignItems:"center",mb:30,width:"100%",children:(0,w.jsx)(f.A,{})}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(h.c,{children:(0,w.jsxs)(x.x,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,w.jsxs)(m.E,{colSpan:{base:12,md:6},children:[(0,w.jsx)(j.E,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:" Task Title "}),(0,w.jsx)(j.E,{children:null!==$&&void 0!==$&&$.title?null===$||void 0===$?void 0:$.title:" - "})]}),(0,w.jsxs)(m.E,{colSpan:{base:12,md:6},children:[(0,w.jsx)(j.E,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:" Task Related To "}),(0,w.jsx)(j.E,{children:null!==$&&void 0!==$&&$.category?null===$||void 0===$?void 0:$.category:" - "})]}),(0,w.jsxs)(m.E,{colSpan:{base:12,md:6},children:[(0,w.jsx)(j.E,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:" Task start "}),(0,w.jsx)(j.E,{children:null!==$&&void 0!==$&&$.start?k()(null===$||void 0===$?void 0:$.start).format("L LT"):" - "})]}),(0,w.jsxs)(m.E,{colSpan:{base:12,md:6},children:[(0,w.jsx)(j.E,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:" Task end  "}),(0,w.jsx)(j.E,{children:null!==$&&void 0!==$&&$.end?k()(null===$||void 0===$?void 0:$.end).format("L LT"):k()(null===$||void 0===$?void 0:$.start).format("L")})]}),(0,w.jsxs)(m.E,{colSpan:{base:12,md:6},children:[(0,w.jsx)(j.E,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:" Task Link "}),null!==$&&void 0!==$&&$.url?(0,w.jsx)("a",{target:"_blank",href:null===$||void 0===$?void 0:$.url,children:(0,w.jsx)(v.K,{borderRadius:"10px",size:"md",icon:(0,w.jsx)(g.o9J,{})})}):"-"]}),(0,w.jsxs)(m.E,{colSpan:{base:12,md:6},children:[(0,w.jsx)(j.E,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:" Task reminder "}),(0,w.jsx)(j.E,{children:null!==$&&void 0!==$&&$.reminder?null===$||void 0===$?void 0:$.reminder:" - "})]}),(0,w.jsxs)(m.E,{colSpan:{base:12,md:6},children:[(0,w.jsx)(j.E,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:" assignment To  "}),(0,w.jsx)(E.N_,{to:null!==$&&void 0!==$&&$.assignmentTo?"admin"!==(null===R||void 0===R?void 0:R.role)?`/contactView/${null===$||void 0===$?void 0:$.assignmentTo}`:`/admin/contactView/${null===$||void 0===$?void 0:$.assignmentTo}`:"admin"!==(null===R||void 0===R?void 0:R.role)?`/leadView/${null===$||void 0===$?void 0:$.assignmentToLead}`:`/admin/leadView/${null===$||void 0===$?void 0:$.assignmentToLead}`,children:(0,w.jsx)(j.E,{color:"green.400",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},children:null!==$&&void 0!==$&&$.assignmentToName?null===$||void 0===$?void 0:$.assignmentToName:" - "})})]}),(0,w.jsxs)(m.E,{colSpan:{base:12,md:6},children:[(0,w.jsx)(j.E,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:" Task createBy "}),(0,w.jsx)(j.E,{children:null!==$&&void 0!==$&&$.createByName?null===$||void 0===$?void 0:$.createByName:" - "})]}),(0,w.jsxs)(m.E,{colSpan:{base:12},children:[(0,w.jsx)(j.E,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:" Task Description"}),(0,w.jsx)(j.E,{children:null!==$&&void 0!==$&&$.description?null===$||void 0===$?void 0:$.description:" - "})]}),(0,w.jsxs)(m.E,{colSpan:{base:12},children:[(0,w.jsx)(j.E,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:" Task notes "}),(0,w.jsx)(j.E,{children:null!==$&&void 0!==$&&$.notes?null===$||void 0===$?void 0:$.notes:" - "})]})]})}),(0,w.jsxs)(p.j,{children:[(0,w.jsx)(v.K,{variant:"outline",onClick:()=>(()=>{var e,l,i,n,o,d;null!==L&&void 0!==L&&L.event?I("admin"!==(null===R||void 0===R?void 0:R.role)?`/view/${null===L||void 0===L||null===(e=L.event)||void 0===e||null===(l=e._def)||void 0===l||null===(i=l.extendedProps)||void 0===i?void 0:i._id}`:`/admin/view/${null===L||void 0===L||null===(n=L.event)||void 0===n||null===(o=n._def)||void 0===o||null===(d=o.extendedProps)||void 0===d?void 0:d._id}`):I("admin"!==(null===R||void 0===R?void 0:R.role)?`/view/${L}`:`/admin/view/${L}`)})(),borderRadius:"10px",size:"md",icon:(0,w.jsx)(o.t,{})}),(0,w.jsx)(v.K,{variant:"outline",onClick:()=>P(!0),ml:3,borderRadius:"10px",size:"md",icon:(0,w.jsx)(d.q,{})}),(0,w.jsx)(v.K,{colorScheme:"red",onClick:()=>K(!0),ml:3,borderRadius:"10px",size:"md",icon:(0,w.jsx)(t.d,{})}),(0,w.jsx)(A.A,{fetchData:O,isOpen:G,onClose:P,viewClose:_,id:null!==L&&void 0!==L&&L.event?null===L||void 0===L||null===(l=L.event)||void 0===l||null===(i=l._def)||void 0===i||null===(b=i.extendedProps)||void 0===b?void 0:b._id:L}),(0,w.jsx)(T.A,{fetchData:e.fetchData,isOpen:F,onClose:K,viewClose:_,url:"api/task/delete/",method:"one",id:null!==L&&void 0!==L&&L.event?null===L||void 0===L||null===(z=L.event)||void 0===z||null===(W=z._def)||void 0===W||null===(D=W.extendedProps)||void 0===D?void 0:D._id:L})]})]})]})]})}}}]);
//# sourceMappingURL=797.3c7b538e.chunk.js.map