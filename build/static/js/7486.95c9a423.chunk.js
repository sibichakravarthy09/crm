"use strict";(self.webpackChunkcrm=self.webpackChunkcrm||[]).push([[7486],{216:(e,a,l)=>{l.d(a,{A:()=>i});var t=l(5158),n=l(2107),s=l(579);const i=function(e){const{variant:a,children:l,...i}=e,o=(0,t.V)("Card",{variant:a});return(0,s.jsx)(n.a,{__css:o,height:"100%",...i,children:l})}},100:(e,a,l)=>{l.d(a,{A:()=>p});var t=l(4167),n=l(4261),s=l(3856),i=l(9938),o=l(5371),r=l(1221),d=l(2703),c=l(9081),u=l(4860),x=l(1724),h=l(5043),g=l(579);const p=e=>{const{gotoPage:a,gopageValue:l,setGopageValue:p,pageCount:m,canPreviousPage:v,previousPage:j,canNextPage:f,pageOptions:b,setPageSize:S,nextPage:y,pageSize:C,pageIndex:w}=e;return(0,h.useEffect)((()=>{p(1)}),[]),(0,g.jsxs)(o.s,{justifyContent:"space-between",mt:2,alignItems:"center",children:[1!==(null===b||void 0===b?void 0:b.length)&&(0,g.jsxs)(o.s,{children:[(0,g.jsx)(r.m,{label:"First Page",children:(0,g.jsx)(d.K,{onClick:()=>{a(0),p(1)},isDisabled:!v,icon:(0,g.jsx)(t.A,{h:3,w:3}),mr:4})}),(0,g.jsx)(r.m,{label:"Previous Page",children:(0,g.jsx)(d.K,{onClick:()=>{j(),p((e=>e-1))},isDisabled:!v,icon:(0,g.jsx)(n.Y,{h:6,w:6})})})]}),(0,g.jsxs)(o.s,{alignItems:"center",children:[1!==(null===b||void 0===b?void 0:b.length)&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(c.E,{flexShrink:"0",mr:8,children:["Page"," ",(0,g.jsx)(c.E,{fontWeight:"bold",as:"span",children:w+1})," ","of"," ",(0,g.jsx)(c.E,{fontWeight:"bold",as:"span",children:null===b||void 0===b?void 0:b.length})]}),(0,g.jsx)(c.E,{flexShrink:"0",children:"Go to page:"})," ",(0,g.jsxs)(u.Q7,{ml:2,mr:8,w:28,min:1,max:null===b||void 0===b?void 0:b.length,value:l,onChange:e=>{a(e?e-1:0),p(e)},defaultValue:w+1,children:[(0,g.jsx)(u.OO,{}),(0,g.jsxs)(u.lw,{children:[(0,g.jsx)(u.Q0,{}),(0,g.jsx)(u.Sh,{})]})]})]}),(0,g.jsx)(x.l,{w:32,value:C,onChange:e=>{S(Number(e.target.value))},children:[5,10,20,30,40,50].map((e=>(0,g.jsxs)("option",{value:e,children:["Show ",e]},e)))})]}),1!==(null===b||void 0===b?void 0:b.length)&&(0,g.jsxs)(o.s,{children:[(0,g.jsx)(r.m,{label:"Next Page",children:(0,g.jsx)(d.K,{onClick:()=>{y(),p((e=>e+1))},isDisabled:!f,icon:(0,g.jsx)(s.v,{h:6,w:6})})}),(0,g.jsx)(r.m,{label:"Last Page",children:(0,g.jsx)(d.K,{onClick:()=>{a(m-1),p(m)},isDisabled:!f,icon:(0,g.jsx)(i.f,{h:3,w:3}),ml:4})})]})]})}},9488:(e,a,l)=>{l.d(a,{A:()=>n});var t=l(579);const n=()=>(0,t.jsx)("div",{className:"loader"})},8911:(e,a,l)=>{l.d(a,{A:()=>m});var t=l(8460),n=l(1054),s=l(5421),i=l(5071),o=l(5929),r=l(7516),d=l(6529),c=l(9301),u=l(9488),x=l(5043),h=l(3216),g=l(9621),p=l(579);const m=e=>{const[a,l]=(0,x.useState)(!1),m=(0,h.Zp)();return(0,p.jsx)("div",{children:(0,p.jsxs)(t.aF,{onClose:e.onClose,isOpen:e.isOpen,isCentered:!0,children:[(0,p.jsx)(n.m,{}),(0,p.jsxs)(s.$,{children:[(0,p.jsxs)(i.r,{children:["Delete Contact","one"===e.method?"":"s"]}),(0,p.jsx)(o.s,{}),(0,p.jsxs)(r.c,{children:["Are You Sure To Delete selated Contact","one"===e.method?"":"s"," ?"]}),(0,p.jsxs)(d.j,{children:[(0,p.jsx)(c.$,{colorScheme:"red",mr:2,onClick:async()=>{if("one"===e.method)try{l(!0);200===(await(0,g.Gx)(e.url,e.id)).status&&m("/contacts")}catch(a){console.log(a)}finally{l(!1)}else if("many"===e.method)try{l(!0),200===(await(0,g.Vn)(e.url,e.data)).status&&(e.setSelectedValues([]),e.onClose(!1))}catch(a){console.log(a)}finally{l(!1)}},disabled:!!a,children:a?(0,p.jsx)(u.A,{}):"Yes"}),(0,p.jsx)(c.$,{variant:"outline",onClick:()=>{e.onClose(!1)},children:"No"})]})]})]})})}},3972:(e,a,l)=>{l.d(a,{A:()=>v});var t=l(2107),n=l(1724),s=l(6686),i=l(9904),o=l(4812),r=l(216),d=l(6178),c=l.n(d),u=l(5043),x=l(2019),h=l(1899),g=l.n(h),p=(l(5015),l(9621)),m=l(579);const v=e=>{const{dashboard:a}=e,[l,d]=(0,u.useState)({}),[h,v]=(0,u.useState)(new Date(new Date-12096e5)),[j,f]=(0,u.useState)(new Date),[b,S]=(0,u.useState)("all"),[y,C]=(0,u.useState)("day"),w=JSON.parse(localStorage.getItem("user")),P=Object.keys(l).map((e=>{const a=l[e][0];let t=[];return null!==a&&void 0!==a&&a.Emails&&(t=t.concat(a.Emails.map((e=>({x:e.date,y:e.Emailcount}))))),null!==a&&void 0!==a&&a.Calls&&(t=t.concat(a.Calls.map((e=>({x:e.date,y:e.Callcount}))))),null!==a&&void 0!==a&&a.TextMsges&&(t=t.concat(a.TextMsges.map((e=>({x:e.date,y:e.TextSentCount}))))),{name:e,data:t}}));(0,u.useEffect)((()=>{(async()=>{const e={startDate:c()(h).format("YYYY-MM-DD"),endDate:c()(j).format("YYYY-MM-DD"),filter:y};let a=await(0,p.d_)("admin"===w.role?"api/reporting/index":`api/reporting/index?sender=${w._id}`,e);a&&200===a.status&&d(null===a||void 0===a?void 0:a.data)})()}),[h,j,y]);const D="all"===b?P:P.filter((e=>e.name===b));return(0,m.jsxs)(r.A,{children:[!a&&(0,m.jsxs)(t.a,{display:"flex",alignItems:"center",flexWrap:"wrap",justifyContent:"space-between",mb:4,children:[(0,m.jsxs)(n.l,{value:b,onChange:e=>S(e.target.value),width:{base:"100%",md:"15%"},mb:{base:3,md:"auto"},children:[(0,m.jsx)("option",{value:"EmailDetails",children:"Email"}),(0,m.jsx)("option",{value:"outboundcall",children:"Call"}),(0,m.jsx)("option",{value:"all",children:"all"})]}),(0,m.jsxs)(t.a,{width:{base:"100%",md:"auto"},flexWrap:"wrap",justifyContent:"left",mb:{base:3,md:"auto"},display:"flex",children:[(0,m.jsx)(g(),{selected:h,onChange:e=>v(e)}),(0,m.jsx)(g(),{selected:j,onChange:e=>f(e)})]}),(0,m.jsx)(t.a,{width:{base:"100%",md:"auto"},display:"flex",justifyContent:"right",mb:{base:3,md:"auto"},children:(0,m.jsx)(s.z,{onChange:e=>C(e),value:y,children:(0,m.jsxs)(i.B,{direction:"row",children:[(0,m.jsx)(o.s,{value:"day",children:"Daily"}),(0,m.jsx)(o.s,{value:"week",children:"Weekly"})]})})})]}),(0,m.jsx)("div",{id:"chart",children:(0,m.jsx)("div",{id:"chart-timeline",children:D&&(0,m.jsx)(x.A,{options:{chart:{id:"line-chart"},xaxis:{type:"datetime"},yaxis:{title:{text:"Count"}},dataLabels:{enabled:!0}},series:D,type:"area",height:350})})})]})}},7486:(e,a,l)=>{l.r(a),l.d(a,{default:()=>C});var t=l(216),n=l(5043),s=(l(5015),l(9621)),i=l(4093),o=l(5371),r=l(9081),d=l(511),c=l(3313),u=l(5395),x=l(3201),h=l(2595),g=l(7813),p=l(1094),m=l(8584),v=l(100),j=l(5369),f=l(8911),b=l(579);function S(e){const{columnsData:a,barData:l}=e,s=(0,i.dU)("secondaryGray.900","white"),S=(0,i.dU)("gray.200","whiteAlpha.100"),y=(0,n.useMemo)((()=>a),[a]),[C,w]=(0,n.useState)([]),[P,D]=(0,n.useState)(!1),E=(0,n.useMemo)((()=>l),[l]),[A,k]=(0,n.useState)(),z=(0,p.useTable)({columns:y,data:E,initialState:{pageIndex:0}},p.useGlobalFilter,p.useSortBy,p.usePagination),{getTableProps:H,getTableBodyProps:T,headerGroups:N,prepareRow:O,page:M,canPreviousPage:V,canNextPage:W,pageOptions:Y,pageCount:I,gotoPage:G,nextPage:_,previousPage:R,setPageSize:F,state:{pageIndex:$,pageSize:B}}=z;return Y.length<A&&k(Y.length),(0,b.jsxs)(t.A,{direction:"column",w:"100%",px:"0px",overflowX:{sm:"scroll",lg:"scroll"},children:[(0,b.jsxs)(o.s,{px:"25px",justify:"space-between",mb:"20px",align:"center",children:[(0,b.jsxs)(r.E,{color:s,fontSize:"22px",fontWeight:"700",lineHeight:"100%",children:["Reports (",E.length,")"]}),C.length>0&&(0,b.jsx)(m.d,{onClick:()=>D(!0),color:"red"})]}),(0,b.jsx)(f.A,{isOpen:P,onClose:D,setSelectedValues:w,url:"api/contact/deleteMany",data:C,method:"many"}),(0,b.jsxs)(d.X,{...H(),variant:"simple",color:"gray.500",mb:"24px",children:[(0,b.jsx)(c.d,{children:null===N||void 0===N?void 0:N.map(((e,a)=>{var l;return(0,n.createElement)(u.Tr,{...e.getHeaderGroupProps(),key:a},null===(l=e.headers)||void 0===l?void 0:l.map(((e,a)=>(0,n.createElement)(x.Th,{...e.getHeaderProps(!1!==e.isSortable&&e.getSortByToggleProps()),pe:"10px",key:a,borderColor:S},(0,b.jsxs)(o.s,{justify:"space-between",align:"center",fontSize:{sm:"10px",lg:"12px"},color:"gray.400",children:[e.render("Header"),!1!==e.isSortable&&(0,b.jsx)("span",{children:e.isSorted?e.isSortedDesc?(0,b.jsx)(j.GOR,{}):(0,b.jsx)(j.XhJ,{}):(0,b.jsx)(j.MjW,{})})]})))))}))}),(0,b.jsxs)(h.N,{...T(),children:[0===E.length&&(0,b.jsx)(u.Tr,{children:(0,b.jsx)(g.Td,{colSpan:y.length,children:(0,b.jsx)(r.E,{textAlign:"center",width:"100%",color:s,fontSize:"sm",fontWeight:"700",children:"-- No Data Found --"})})}),null===M||void 0===M?void 0:M.map(((e,a)=>{var l;return O(e),(0,n.createElement)(u.Tr,{...null===e||void 0===e?void 0:e.getRowProps(),key:a},null===e||void 0===e||null===(l=e.cells)||void 0===l?void 0:l.map(((e,a)=>{let l="";var t;"#"===(null===e||void 0===e?void 0:e.column.Header)?l=(0,b.jsx)(o.s,{align:"center",children:(0,b.jsx)(r.E,{color:s,fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e||null===(t=e.row)||void 0===t?void 0:t.index)+1})}):("Name"===(null===e||void 0===e?void 0:e.column.Header)||"Email Sent"===(null===e||void 0===e?void 0:e.column.Header)||"Text Sent"===(null===e||void 0===e?void 0:e.column.Header)||"Outbound Calls"===(null===e||void 0===e?void 0:e.column.Header)||"Email Received"===(null===e||void 0===e?void 0:e.column.Header)||"Text Received"===(null===e||void 0===e?void 0:e.column.Header))&&(l=(0,b.jsx)(r.E,{me:"10px",color:s,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}));return(0,n.createElement)(g.Td,{...null===e||void 0===e?void 0:e.getCellProps(),key:a,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"},l)})))}))]})]}),(null===E||void 0===E?void 0:E.length)>5&&(0,b.jsx)(v.A,{gotoPage:G,gopageValue:A,setGopageValue:k,pageCount:I,canPreviousPage:V,previousPage:R,canNextPage:W,pageOptions:Y,setPageSize:F,nextPage:_,pageSize:B,pageIndex:$})]})}var y=l(3972);const C=()=>{const[e,a]=(0,n.useState)([]),l=JSON.parse(localStorage.getItem("user")),i=[{Header:"Email Sent",accessor:"emailsent"},{Header:"Outbound Calls",accessor:"outboundcall"}];"admin"===l.role&&i.unshift({Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"Name",accessor:"firstName"});return(0,n.useEffect)((()=>{(async()=>{let e=await(0,s.x4)("admin"===l.role?"api/reporting":`api/reporting?_id=${l._id}`);e&&200===e.status&&a(null===e||void 0===e?void 0:e.data)})()}),[]),(0,b.jsxs)("div",{children:[(0,b.jsx)(y.A,{}),(0,b.jsx)(t.A,{mt:4,children:(0,b.jsx)(S,{columnsData:i,barData:e})})]})}},8584:(e,a,l)=>{l.d(a,{d:()=>n});var t=l(579);const n=(0,l(4010).w)({displayName:"DeleteIcon",path:(0,t.jsx)("g",{fill:"currentColor",children:(0,t.jsx)("path",{d:"M19.452 7.5H4.547a.5.5 0 00-.5.545l1.287 14.136A2 2 0 007.326 24h9.347a2 2 0 001.992-1.819L19.95 8.045a.5.5 0 00-.129-.382.5.5 0 00-.369-.163zm-9.2 13a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zm5 0a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zM22 4h-4.75a.25.25 0 01-.25-.25V2.5A2.5 2.5 0 0014.5 0h-5A2.5 2.5 0 007 2.5v1.25a.25.25 0 01-.25.25H2a1 1 0 000 2h20a1 1 0 000-2zM9 3.75V2.5a.5.5 0 01.5-.5h5a.5.5 0 01.5.5v1.25a.25.25 0 01-.25.25h-5.5A.25.25 0 019 3.75z"})})})}}]);
//# sourceMappingURL=7486.95c9a423.chunk.js.map